<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 9 Clustering | Introduction aux Data Sciences/nAvec r</title>
  <meta name="description" content="Cours d’analyse de données et de Datascience" />
  <meta name="generator" content="bookdown 0.22.3 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 9 Clustering | Introduction aux Data Sciences/nAvec r" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Cours d’analyse de données et de Datascience" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 9 Clustering | Introduction aux Data Sciences/nAvec r" />
  
  <meta name="twitter:description" content="Cours d’analyse de données et de Datascience" />
  

<meta name="author" content="Christophe Benavent - Université Paris Dauphine" />


<meta name="date" content="2022-10-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analyses-factorielles-exploratoires.html"/>
<link rel="next" href="régression.html"/>
<script src="libs/header-attrs-2.17/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science Book</a></li>

<li class="divider"></li>
<li><a href="index.html#avant-propos" id="toc-avant-propos"><span class="toc-section-number">1</span> Avant propos<span></span></a>
<ul>
<li><a href="index.html#plan-du-manuel" id="toc-plan-du-manuel"><span class="toc-section-number">1.1</span> Plan du manuel<span></span></a></li>
<li><a href="index.html#les-jeux-de-données" id="toc-les-jeux-de-données"><span class="toc-section-number">1.2</span> Les jeux de données<span></span></a></li>
<li><a href="index.html#le-cadre-technique-et-les-packages-utilisés" id="toc-le-cadre-technique-et-les-packages-utilisés"><span class="toc-section-number">1.3</span> Le cadre technique et les packages utilisés<span></span></a></li>
</ul></li>
<li><a href="intro.html#intro" id="toc-intro"><span class="toc-section-number">2</span> Introduction aux data sciences<span></span></a>
<ul>
<li><a href="intro.html#science-art-technique-et-pratiques" id="toc-science-art-technique-et-pratiques"><span class="toc-section-number">2.1</span> Science, art, technique et pratiques<span></span></a></li>
<li><a href="intro.html#une-courte-histoires-des-logiciels-statistiques" id="toc-une-courte-histoires-des-logiciels-statistiques"><span class="toc-section-number">2.2</span> Une courte histoires des logiciels statistiques<span></span></a></li>
<li><a href="intro.html#le-processus-de-traitement-des-données" id="toc-le-processus-de-traitement-des-données"><span class="toc-section-number">2.3</span> Le processus de traitement des données<span></span></a></li>
<li><a href="intro.html#les-facteurs-sociaux-du-développement-des-datasciences" id="toc-les-facteurs-sociaux-du-développement-des-datasciences"><span class="toc-section-number">2.4</span> Les facteurs sociaux du développement des datasciences<span></span></a>
<ul>
<li><a href="intro.html#une-lingua-franca" id="toc-une-lingua-franca"><span class="toc-section-number">2.4.1</span> Une lingua franca<span></span></a></li>
<li><a href="intro.html#une-communauté" id="toc-une-communauté"><span class="toc-section-number">2.4.2</span> Une communauté<span></span></a></li>
<li><a href="intro.html#la-multiplication-des-sources-de-données." id="toc-la-multiplication-des-sources-de-données."><span class="toc-section-number">2.4.3</span> La multiplication des sources de données.<span></span></a></li>
<li><a href="intro.html#de-la-statistique-à-lia" id="toc-de-la-statistique-à-lia"><span class="toc-section-number">2.4.4</span> de la statistique à l’IA<span></span></a></li>
</ul></li>
<li><a href="intro.html#conclusion" id="toc-conclusion"><span class="toc-section-number">2.5</span> Conclusion<span></span></a></li>
</ul></li>
<li><a href="prise-en-main-de-r.html#prise-en-main-de-r" id="toc-prise-en-main-de-r"><span class="toc-section-number">3</span> Prise en main de r<span></span></a>
<ul>
<li><a href="prise-en-main-de-r.html#la-convention-du-rmarkdown" id="toc-la-convention-du-rmarkdown"><span class="toc-section-number">3.1</span> La convention du Rmarkdown<span></span></a></li>
<li><a href="prise-en-main-de-r.html#lire-les-données" id="toc-lire-les-données"><span class="toc-section-number">3.2</span> Lire les données<span></span></a>
<ul>
<li><a href="prise-en-main-de-r.html#la-diversité-des-formats" id="toc-la-diversité-des-formats"><span class="toc-section-number">3.2.1</span> La diversité des formats<span></span></a></li>
</ul></li>
<li><a href="prise-en-main-de-r.html#dplyr-pour-manipuler-les-données" id="toc-dplyr-pour-manipuler-les-données"><span class="toc-section-number">3.3</span> <code>Dplyr</code> pour manipuler les données<span></span></a>
<ul>
<li><a href="prise-en-main-de-r.html#des-pipes" id="toc-des-pipes"><span class="toc-section-number">3.3.1</span> Des pipes %&gt;%<span></span></a></li>
<li><a href="prise-en-main-de-r.html#des-verbes" id="toc-des-verbes"><span class="toc-section-number">3.3.2</span> Des verbes<span></span></a></li>
<li><a href="prise-en-main-de-r.html#fusionner-les-données" id="toc-fusionner-les-données"><span class="toc-section-number">3.3.3</span> Fusionner les données<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#introduction-à-la-grammaire-des-graphiques-et-à-ggplot" id="toc-introduction-à-la-grammaire-des-graphiques-et-à-ggplot"><span class="toc-section-number">4</span> Introduction à la grammaire des graphiques et à ggplot<span></span></a>
<ul>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#la-grammaire-des-graphiques" id="toc-la-grammaire-des-graphiques"><span class="toc-section-number">4.1</span> La grammaire des graphiques<span></span></a>
<ul>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#un-modèle-en-couche" id="toc-un-modèle-en-couche"><span class="toc-section-number">4.1.1</span> Un modèle en couche<span></span></a></li>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#une-typologie-des-représentations" id="toc-une-typologie-des-représentations"><span class="toc-section-number">4.1.2</span> Une typologie des représentations<span></span></a></li>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#lesthétique" id="toc-lesthétique"><span class="toc-section-number">4.1.3</span> L’esthétique<span></span></a></li>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#le-cas-des-variables-quantitatives" id="toc-le-cas-des-variables-quantitatives"><span class="toc-section-number">4.1.4</span> Le cas des variables quantitatives<span></span></a></li>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#dautres-méthodes" id="toc-dautres-méthodes"><span class="toc-section-number">4.1.5</span> D’autres méthodes<span></span></a></li>
<li><a href="introduction-à-la-grammaire-des-graphiques-et-à-ggplot.html#quand-la-variable-est-qualitative" id="toc-quand-la-variable-est-qualitative"><span class="toc-section-number">4.1.6</span> Quand la variable est qualitative<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="analyse-bi-variée.html#analyse-bi-variée" id="toc-analyse-bi-variée"><span class="toc-section-number">5</span> Analyse bi variée<span></span></a>
<ul>
<li><a href="analyse-bi-variée.html#diagrammes-xy---la-magie-des-corrélations" id="toc-diagrammes-xy---la-magie-des-corrélations"><span class="toc-section-number">5.1</span> Diagrammes xy - la magie des corrélations<span></span></a></li>
<li><a href="analyse-bi-variée.html#comparer-les-distributions-et-des-moyennes" id="toc-comparer-les-distributions-et-des-moyennes"><span class="toc-section-number">5.2</span> Comparer les distributions et des moyennes<span></span></a>
<ul>
<li><a href="analyse-bi-variée.html#comparaison-de-moyennes" id="toc-comparaison-de-moyennes"><span class="toc-section-number">5.2.1</span> Comparaison de moyennes<span></span></a></li>
<li><a href="analyse-bi-variée.html#deux-variables-qualitatives" id="toc-deux-variables-qualitatives"><span class="toc-section-number">5.2.2</span> Deux variables qualitatives<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="analyse-graphique-multivariée.html#analyse-graphique-multivariée" id="toc-analyse-graphique-multivariée"><span class="toc-section-number">6</span> Analyse graphique multivariée<span></span></a>
<ul>
<li><a href="analyse-graphique-multivariée.html#la-confiance-institutionnelle-en-détail" id="toc-la-confiance-institutionnelle-en-détail"><span class="toc-section-number">6.1</span> La confiance institutionnelle, en détail<span></span></a></li>
<li><a href="analyse-graphique-multivariée.html#table-de-corrélation" id="toc-table-de-corrélation"><span class="toc-section-number">6.2</span> Table de corrélation<span></span></a></li>
<li><a href="analyse-graphique-multivariée.html#un-cas-plus-complexe-présidentielle2020" id="toc-un-cas-plus-complexe-présidentielle2020"><span class="toc-section-number">6.3</span> Un cas plus complexe : présidentielle2020<span></span></a></li>
<li><a href="analyse-graphique-multivariée.html#une-boucle-pour-produire-de-multiple-graphe-en-variant-un-paramètre" id="toc-une-boucle-pour-produire-de-multiple-graphe-en-variant-un-paramètre"><span class="toc-section-number">6.4</span> une boucle pour produire de multiple graphe en variant un paramètre<span></span></a>
<ul>
<li><a href="analyse-graphique-multivariée.html#effet-sondeur" id="toc-effet-sondeur"><span class="toc-section-number">6.4.1</span> effet sondeur<span></span></a></li>
</ul></li>
<li><a href="analyse-graphique-multivariée.html#modéliser-le-biais-du-sondeur" id="toc-modéliser-le-biais-du-sondeur"><span class="toc-section-number">6.5</span> Modéliser le biais du sondeur<span></span></a></li>
</ul></li>
<li><a href="données-géographique.html#données-géographique" id="toc-données-géographique"><span class="toc-section-number">7</span> Données géographique<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#analyses-factorielles-exploratoires" id="toc-analyses-factorielles-exploratoires"><span class="toc-section-number">8</span> Analyses factorielles exploratoires<span></span></a>
<ul>
<li><a href="analyses-factorielles-exploratoires.html#origine-et-histoire" id="toc-origine-et-histoire"><span class="toc-section-number">8.1</span> Origine et histoire<span></span></a>
<ul>
<li><a href="analyses-factorielles-exploratoires.html#une-petite-histoire-de-la-psychométrie" id="toc-une-petite-histoire-de-la-psychométrie"><span class="toc-section-number">8.1.1</span> Une petite histoire de la psychométrie<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#lécole-française-de-lanalyse-des-données-appliquée-aux-sciences-sociales" id="toc-lécole-française-de-lanalyse-des-données-appliquée-aux-sciences-sociales"><span class="toc-section-number">8.1.2</span> L’école française de l’analyse des données appliquée aux sciences sociales<span></span></a></li>
</ul></li>
<li><a href="analyses-factorielles-exploratoires.html#le-modèle-en-facteurs-communs-et-spécifiques" id="toc-le-modèle-en-facteurs-communs-et-spécifiques"><span class="toc-section-number">8.2</span> Le modèle en facteurs communs et spécifiques<span></span></a>
<ul>
<li><a href="analyses-factorielles-exploratoires.html#un-peu-de-théorie" id="toc-un-peu-de-théorie"><span class="toc-section-number">8.2.1</span> Un peu de théorie<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#ressources" id="toc-ressources"><span class="toc-section-number">8.2.2</span> Ressources<span></span></a></li>
</ul></li>
<li><a href="analyses-factorielles-exploratoires.html#cas-dapplication" id="toc-cas-dapplication"><span class="toc-section-number">8.3</span> Cas d’application<span></span></a>
<ul>
<li><a href="analyses-factorielles-exploratoires.html#examen-de-la-matrice-de-corrélation" id="toc-examen-de-la-matrice-de-corrélation"><span class="toc-section-number">8.3.1</span> Examen de la matrice de corrélation<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#modèle-factoriel" id="toc-modèle-factoriel"><span class="toc-section-number">8.3.2</span> Modèle factoriel<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#le-problème-théorique" id="toc-le-problème-théorique"><span class="toc-section-number">8.3.3</span> le problème théorique<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#une-représentation-symbolique" id="toc-une-représentation-symbolique"><span class="toc-section-number">8.3.4</span> Une représentation symbolique<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#application" id="toc-application"><span class="toc-section-number">8.3.5</span> Application<span></span></a></li>
</ul></li>
<li><a href="analyses-factorielles-exploratoires.html#une-généralisation-de-lacp-lafc" id="toc-une-généralisation-de-lacp-lafc"><span class="toc-section-number">8.4</span> Une généralisation de l’ACP : l’AFC<span></span></a>
<ul>
<li><a href="analyses-factorielles-exploratoires.html#afcm-multiple" id="toc-afcm-multiple"><span class="toc-section-number">8.4.1</span> AFCM multiple<span></span></a></li>
</ul></li>
<li><a href="analyses-factorielles-exploratoires.html#développements" id="toc-développements"><span class="toc-section-number">8.5</span> Développements<span></span></a>
<ul>
<li><a href="analyses-factorielles-exploratoires.html#le-svd" id="toc-le-svd"><span class="toc-section-number">8.5.1</span> le SVD<span></span></a></li>
<li><a href="analyses-factorielles-exploratoires.html#acm-analyse-canonique-analyse-discriminante" id="toc-acm-analyse-canonique-analyse-discriminante"><span class="toc-section-number">8.5.2</span> ACM , analyse canonique , analyse discriminante<span></span></a></li>
</ul></li>
<li><a href="analyses-factorielles-exploratoires.html#en-conclusion" id="toc-en-conclusion"><span class="toc-section-number">8.6</span> En conclusion<span></span></a></li>
</ul></li>
<li><a href="clus.html#clus" id="toc-clus"><span class="toc-section-number">9</span> Clustering<span></span></a>
<ul>
<li><a href="clus.html#les-méthodes-hiérarchiques-ascendantes" id="toc-les-méthodes-hiérarchiques-ascendantes"><span class="toc-section-number">9.1</span> Les méthodes hiérarchiques ascendantes<span></span></a>
<ul>
<li><a href="clus.html#mise-en-oeuvre" id="toc-mise-en-oeuvre"><span class="toc-section-number">9.1.1</span> Mise en oeuvre<span></span></a></li>
</ul></li>
<li><a href="clus.html#segmentation-simplifiée" id="toc-segmentation-simplifiée"><span class="toc-section-number">9.2</span> segmentation simplifiée<span></span></a></li>
<li><a href="clus.html#tableaux-croisés-de-la-typologie-et-des-critères-sociaux-démos" id="toc-tableaux-croisés-de-la-typologie-et-des-critères-sociaux-démos"><span class="toc-section-number">9.3</span> tableaux croisés de la typologie et des critères sociaux démos<span></span></a></li>
<li><a href="clus.html#afcm-pour-une-synthèse" id="toc-afcm-pour-une-synthèse"><span class="toc-section-number">9.4</span> AFCM pour une synthèse<span></span></a>
<ul>
<li><a href="clus.html#forces-et-limites" id="toc-forces-et-limites"><span class="toc-section-number">9.4.1</span> Forces et limites<span></span></a></li>
</ul></li>
<li><a href="clus.html#les-méthodes-non-hiérarchiques" id="toc-les-méthodes-non-hiérarchiques"><span class="toc-section-number">9.5</span> Les méthodes non-hiérarchiques<span></span></a>
<ul>
<li><a href="clus.html#principe" id="toc-principe"><span class="toc-section-number">9.5.1</span> principe<span></span></a></li>
<li><a href="clus.html#application-1" id="toc-application-1"><span class="toc-section-number">9.5.2</span> Application<span></span></a></li>
<li><a href="clus.html#le-problème-de-la-détermination-du-nombre-optimal-de-groupe" id="toc-le-problème-de-la-détermination-du-nombre-optimal-de-groupe"><span class="toc-section-number">9.5.3</span> Le problème de la détermination du nombre optimal de groupe<span></span></a></li>
</ul></li>
<li><a href="clus.html#autres-méthodes" id="toc-autres-méthodes"><span class="toc-section-number">9.6</span> Autres méthodes<span></span></a></li>
<li><a href="clus.html#conclusion-1" id="toc-conclusion-1"><span class="toc-section-number">9.7</span> Conclusion<span></span></a></li>
</ul></li>
<li><a href="régression.html#régression" id="toc-régression"><span class="toc-section-number">10</span> Régression<span></span></a>
<ul>
<li><a href="régression.html#quelques-éléments-de-théorie" id="toc-quelques-éléments-de-théorie"><span class="toc-section-number">10.1</span> Quelques éléments de théorie<span></span></a></li>
<li><a href="régression.html#une-étude-de-cas-les-offres-blablacar" id="toc-une-étude-de-cas-les-offres-blablacar"><span class="toc-section-number">10.2</span> Une étude de cas : les offres Blablacar<span></span></a></li>
<li><a href="régression.html#notes-prix-et-taux-doccupations" id="toc-notes-prix-et-taux-doccupations"><span class="toc-section-number">10.3</span> Notes, prix et taux d’occupations<span></span></a></li>
<li><a href="régression.html#analyser-la-demande-quest-ce-qui-détermine-le-taux-doccupation" id="toc-analyser-la-demande-quest-ce-qui-détermine-le-taux-doccupation"><span class="toc-section-number">10.4</span> Analyser la demande : qu’est ce qui détermine le taux d’occupation ?<span></span></a>
<ul>
<li><a href="régression.html#un-modèle-ols" id="toc-un-modèle-ols"><span class="toc-section-number">10.4.1</span> Un modèle OLS<span></span></a></li>
</ul></li>
<li><a href="régression.html#autres-modèles" id="toc-autres-modèles"><span class="toc-section-number">10.5</span> Autres modèles<span></span></a>
<ul>
<li><a href="régression.html#régression-logistique" id="toc-régression-logistique"><span class="toc-section-number">10.5.1</span> Régression logistique<span></span></a></li>
<li><a href="régression.html#modèle-de-comptage" id="toc-modèle-de-comptage"><span class="toc-section-number">10.5.2</span> Modèle de comptage<span></span></a></li>
<li><a href="régression.html#modèle-de-régression-beta" id="toc-modèle-de-régression-beta"><span class="toc-section-number">10.5.3</span> Modèle de régression beta<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="modèle-de-survie.html#modèle-de-survie" id="toc-modèle-de-survie"><span class="toc-section-number">11</span> Modèle de survie<span></span></a></li>
<li><a href="les-modèles-linéaires-hiérarchiques-hlm.html#les-modèles-linéaires-hiérarchiques-hlm" id="toc-les-modèles-linéaires-hiérarchiques-hlm"><span class="toc-section-number">12</span> Les modèles linéaires hiérarchiques (HLM)<span></span></a>
<ul>
<li><a href="les-modèles-linéaires-hiérarchiques-hlm.html#en-guise-dintroduction" id="toc-en-guise-dintroduction"><span class="toc-section-number">12.1</span> en guise d’introduction<span></span></a></li>
<li><a href="les-modèles-linéaires-hiérarchiques-hlm.html#une-application" id="toc-une-application"><span class="toc-section-number">12.2</span> Une application<span></span></a></li>
<li><a href="les-modèles-linéaires-hiérarchiques-hlm.html#sem-avec-lavaan" id="toc-sem-avec-lavaan"><span class="toc-section-number">12.3</span> Sem avec Lavaan<span></span></a></li>
</ul></li>
<li><a href="arbres-de-décision.html#arbres-de-décision" id="toc-arbres-de-décision"><span class="toc-section-number">13</span> Arbres de Décision<span></span></a>
<ul>
<li><a href="arbres-de-décision.html#construire-un-arbre-de-décision" id="toc-construire-un-arbre-de-décision"><span class="toc-section-number">13.1</span> Construire un arbre de décision<span></span></a></li>
<li><a href="arbres-de-décision.html#mise-en-oeuvre-avec-partykit" id="toc-mise-en-oeuvre-avec-partykit"><span class="toc-section-number">13.2</span> Mise en oeuvre avec Partykit<span></span></a></li>
<li><a href="arbres-de-décision.html#forêts-aléatoires" id="toc-forêts-aléatoires"><span class="toc-section-number">13.3</span> forêts aléatoires<span></span></a></li>
</ul></li>
<li><a href="premiers-éléments-de-machine-learning.html#premiers-éléments-de-machine-learning" id="toc-premiers-éléments-de-machine-learning"><span class="toc-section-number">14</span> Premiers éléments de Machine Learning<span></span></a>
<ul>
<li><a href="premiers-éléments-de-machine-learning.html#une-typologie-de-modèles" id="toc-une-typologie-de-modèles"><span class="toc-section-number">14.1</span> une typologie de modèles<span></span></a>
<ul>
<li><a href="premiers-éléments-de-machine-learning.html#le-modèle-linéaire" id="toc-le-modèle-linéaire"><span class="toc-section-number">14.1.1</span> le modèle linéaire<span></span></a></li>
<li><a href="premiers-éléments-de-machine-learning.html#le-modèle-logit" id="toc-le-modèle-logit"><span class="toc-section-number">14.1.2</span> le modèle logit<span></span></a></li>
<li><a href="premiers-éléments-de-machine-learning.html#les-modèles-à-régularisation" id="toc-les-modèles-à-régularisation"><span class="toc-section-number">14.1.3</span> les modèles à régularisation<span></span></a></li>
<li><a href="premiers-éléments-de-machine-learning.html#les-random-forest" id="toc-les-random-forest"><span class="toc-section-number">14.1.4</span> les random forest<span></span></a></li>
</ul></li>
<li><a href="premiers-éléments-de-machine-learning.html#forêts-aléatoires-1" id="toc-forêts-aléatoires-1"><span class="toc-section-number">14.2</span> forêts aléatoires<span></span></a></li>
</ul></li>
<li><a href="annexes.html#annexes" id="toc-annexes"><span class="toc-section-number">15</span> 20 Annexes<span></span></a>
<ul>
<li><a href="annexes.html#données-eric-ess" id="toc-données-eric-ess"><span class="toc-section-number">15.1</span> Données Eric-ESS<span></span></a></li>
<li><a href="annexes.html#fichier-airbnb-bruxelles" id="toc-fichier-airbnb-bruxelles"><span class="toc-section-number">15.2</span> fichier Airbnb Bruxelles<span></span></a></li>
<li><a href="annexes.html#section" id="toc-section"><span class="toc-section-number">15.3</span> </a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction aux Data Sciences/nAvec r</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clus" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Chapitre 9</span> Clustering<a href="clus.html#clus" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>L’objectif des méthodes de classification automatique est de regrouper des observations qui se ressemblent sur un ensemble multidimensionnel de caractéristiques.</p>
<p>insérer image</p>
<p>Dans ce chapitre nous examinons deux familles de méthodes qui le distingue par la procédure de calcul : hierarchique d’une part, non hiérarchique de l’autre. On garde pour le chapître suivant l’étude des modèles de décisions qui ont une longue et riche histoire en marketing et ont préparé le développement de certains modèles de machine learning.</p>
<div id="les-méthodes-hiérarchiques-ascendantes" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Les méthodes hiérarchiques ascendantes<a href="clus.html#les-méthodes-hiérarchiques-ascendantes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Elles trouvent leur origine en biologie où dès les années 1930 Sokal et Sneath<span class="citation">(<a href="#ref-sneath_numerical_1973" role="doc-biblioref">Sneath and Sokal 1973</a>)</span> ont proposé des méthodes pour analyser l’évolution des espèces. L’idée réside dans la comparison de specimens sur la base d’un certains nombre de caractéristiques, d’abord des caractères phénotypiques, puis dans ce domaine en s’appuyant sur les caractéristiques génétiques. Nous n’entrerons pas dans une discussion plus approfondis mais signalons que ces choix déterminent des méthodes et des hypothèses très différentes et largement débattues (cladistique etc)</p>
<p>Prenons le cas de différences phénotypiques et le tableau suivant.</p>
<p>tableau</p>
<p>Le but du jeu est de regrouper successivement les spécimens en fonction de leur ressemblance. L’algorithme consiste simplement à 1) calculer toutes les ressemblances deux à deux et 2) à fondre en une classe les deux éléments qui se ressemble le plus. On réitère l’opération jusqu’à ce qu’on obtienne plus qu’une classe.</p>
<p>Le résultat est une arborescence dont chaque noeud représente un regrouppement de classe à un certain niveau de distance.</p>
<p>figure</p>
<p>Leurs variétés dépend de deux paramètres :</p>
<ul>
<li>le choix de la mesure de dissimilarités : Une distance euclidienne ? Son carré ? Une distance binaire comme l’indice de Jaccard?</li>
<li>le choix de la méthode d’agrégation : que choisit-on pour calculer la distance entre deux classes A et B : la plus grande des distances entre les éléments de A et ceux de B ? La plus petite ? La distance moyennes, la médiane ?</li>
</ul>
<div id="mise-en-oeuvre" class="section level3 hasAnchor" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Mise en oeuvre<a href="clus.html#mise-en-oeuvre" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On utilise l’enquête d’happydemics sur la période de fin mars.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="clus.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb99-2"><a href="clus.html#cb99-2" aria-hidden="true" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">&quot;./data/last.rds&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb99-3"><a href="clus.html#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date2<span class="sc">&gt;=</span><span class="fu">make_datetime</span>(<span class="at">year=</span><span class="dv">2022</span>, <span class="at">month=</span><span class="dv">3</span>, <span class="at">day =</span> <span class="dv">19</span>))</span>
<span id="cb99-4"><a href="clus.html#cb99-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-5"><a href="clus.html#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="clus.html#cb99-6" aria-hidden="true" tabindex="-1"></a>n_t<span class="ot">&lt;-</span><span class="fu">nrow</span>(df)</span>
<span id="cb99-7"><a href="clus.html#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="clus.html#cb99-8" aria-hidden="true" tabindex="-1"></a>period<span class="ot">&lt;-</span><span class="st">&quot; apres le 19 mars&quot;</span></span></code></pre></div>
<p>Il y a un trick de traitement des données. La question QCM a été encodée en une colonne, ajoutant les chaines de caractère des 16 thématiques avec un séparateurs $ .</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="clus.html#cb100-1" aria-hidden="true" tabindex="-1"></a>foo <span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">str_split_fixed</span>(df<span class="sc">$</span>themes, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">$&quot;</span>,<span class="at">n=</span><span class="dv">3</span>)) <span class="co"># On splite la colonne thème en autant de thème possibles</span></span>
<span id="cb100-2"><a href="clus.html#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="clus.html#cb100-3" aria-hidden="true" tabindex="-1"></a>foo1<span class="ot">&lt;-</span><span class="fu">cbind</span>(df,foo)<span class="sc">%&gt;%</span></span>
<span id="cb100-4"><a href="clus.html#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">V1=</span><span class="dv">23</span>, <span class="at">V2=</span><span class="dv">24</span>, <span class="at">V3=</span><span class="dv">25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb100-5"><a href="clus.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id,V1,V2,V3)<span class="sc">%&gt;%</span> </span>
<span id="cb100-6"><a href="clus.html#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">!</span>id,<span class="at">names_to=</span><span class="st">&quot;rank&quot;</span>,<span class="at">values_to=</span><span class="st">&quot;theme&quot;</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb100-7"><a href="clus.html#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank=</span><span class="fu">ifelse</span>(rank<span class="sc">==</span><span class="st">&quot;V1&quot;</span>, <span class="dv">3</span>,<span class="fu">ifelse</span>(rank<span class="sc">==</span><span class="st">&quot;V2&quot;</span>, <span class="dv">2</span>, <span class="fu">ifelse</span>(rank<span class="sc">==</span><span class="st">&quot;V3&quot;</span>,<span class="dv">1</span>, <span class="dv">0</span>)))) <span class="sc">%&gt;%</span> <span class="co">#on recode les rangs par un facteur d&#39;importance de à 0 à 3</span></span>
<span id="cb100-8"><a href="clus.html#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(theme<span class="sc">!=</span><span class="st">&quot;&quot;</span>)<span class="sc">%&gt;%</span>  </span>
<span id="cb100-9"><a href="clus.html#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">theme=</span><span class="fu">str_trim</span>(theme))<span class="sc">%&gt;%</span></span>
<span id="cb100-10"><a href="clus.html#cb100-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">r=</span><span class="fu">as.numeric</span>(rank))<span class="sc">%&gt;%</span></span>
<span id="cb100-11"><a href="clus.html#cb100-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>rank)</span>
<span id="cb100-12"><a href="clus.html#cb100-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-13"><a href="clus.html#cb100-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-14"><a href="clus.html#cb100-14" aria-hidden="true" tabindex="-1"></a>n1<span class="ot">&lt;-</span><span class="fu">nrow</span>(df) <span class="co"># le nombre d&#39;individus</span></span>
<span id="cb100-15"><a href="clus.html#cb100-15" aria-hidden="true" tabindex="-1"></a>n2<span class="ot">&lt;-</span><span class="fu">nrow</span>(foo1) <span class="co">#le nombre de mentions</span></span></code></pre></div>
<p>Dans une première étape faisons le bilan global</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="clus.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co">#on calcule la proportion et la pénétration des items</span></span>
<span id="cb101-2"><a href="clus.html#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="clus.html#cb101-3" aria-hidden="true" tabindex="-1"></a>foo2 <span class="ot">&lt;-</span>foo1<span class="sc">%&gt;%</span> </span>
<span id="cb101-4"><a href="clus.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">m=</span><span class="dv">1</span>)<span class="sc">%&gt;%</span></span>
<span id="cb101-5"><a href="clus.html#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(theme)<span class="sc">%&gt;%</span></span>
<span id="cb101-6"><a href="clus.html#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">frequence=</span><span class="fu">sum</span>(m),</span>
<span id="cb101-7"><a href="clus.html#cb101-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">proportion=</span>frequence<span class="sc">/</span>n2,</span>
<span id="cb101-8"><a href="clus.html#cb101-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">penetration=</span>frequence<span class="sc">/</span>n1)</span>
<span id="cb101-9"><a href="clus.html#cb101-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-10"><a href="clus.html#cb101-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-11"><a href="clus.html#cb101-11" aria-hidden="true" tabindex="-1"></a>col<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;#F1BB7B&quot;</span>,</span>
<span id="cb101-12"><a href="clus.html#cb101-12" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#FD6467&quot;</span>,</span>
<span id="cb101-13"><a href="clus.html#cb101-13" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#FD6467&quot;</span>,</span>
<span id="cb101-14"><a href="clus.html#cb101-14" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#FD6467&quot;</span>,</span>
<span id="cb101-15"><a href="clus.html#cb101-15" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#5B1A18&quot;</span>,</span>
<span id="cb101-16"><a href="clus.html#cb101-16" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#5B1A18&quot;</span>,</span>
<span id="cb101-17"><a href="clus.html#cb101-17" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#5B1A18&quot;</span>,</span>
<span id="cb101-18"><a href="clus.html#cb101-18" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#F1BB7B&quot;</span>,</span>
<span id="cb101-19"><a href="clus.html#cb101-19" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#FD6467&quot;</span>,</span>
<span id="cb101-20"><a href="clus.html#cb101-20" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#F1BB7B&quot;</span>,</span>
<span id="cb101-21"><a href="clus.html#cb101-21" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#F1BB7B&quot;</span>,</span>
<span id="cb101-22"><a href="clus.html#cb101-22" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#F1BB7B&quot;</span>,</span>
<span id="cb101-23"><a href="clus.html#cb101-23" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#F1BB7B&quot;</span>,</span>
<span id="cb101-24"><a href="clus.html#cb101-24" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#5B1A18&quot;</span>,</span>
<span id="cb101-25"><a href="clus.html#cb101-25" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#FD6467&quot;</span>,</span>
<span id="cb101-26"><a href="clus.html#cb101-26" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#F1BB7B&quot;</span>,</span>
<span id="cb101-27"><a href="clus.html#cb101-27" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;#F1BB7B&quot;</span></span>
<span id="cb101-28"><a href="clus.html#cb101-28" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb101-29"><a href="clus.html#cb101-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-30"><a href="clus.html#cb101-30" aria-hidden="true" tabindex="-1"></a>brks<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>,<span class="fl">0.4</span>,<span class="fl">0.5</span>,<span class="fl">0.6</span>)</span>
<span id="cb101-31"><a href="clus.html#cb101-31" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(foo2,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(theme, frequence), <span class="at">y=</span>penetration))<span class="sc">+</span></span>
<span id="cb101-32"><a href="clus.html#cb101-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="fu">aes</span>(<span class="at">fill=</span>theme))<span class="sc">+</span></span>
<span id="cb101-33"><a href="clus.html#cb101-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb101-34"><a href="clus.html#cb101-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>col)<span class="sc">+</span></span>
<span id="cb101-35"><a href="clus.html#cb101-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pénétration des thèmes dans la population&quot;</span>,</span>
<span id="cb101-36"><a href="clus.html#cb101-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="cn">NULL</span>, </span>
<span id="cb101-37"><a href="clus.html#cb101-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span> <span class="st">&quot;% de la population&quot;</span>, </span>
<span id="cb101-38"><a href="clus.html#cb101-38" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;data @happydemics dataviz @benavent&quot;</span>)<span class="sc">+</span></span>
<span id="cb101-39"><a href="clus.html#cb101-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb101-40"><a href="clus.html#cb101-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)<span class="sc">+</span> </span>
<span id="cb101-41"><a href="clus.html#cb101-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> brks, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent</span>(brks))</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0812-1.png" width="672" /></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="clus.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste0</span>(<span class="st">&quot;./plot/theme_&quot;</span>,period,<span class="st">&quot;.jpg&quot;</span>),<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="segmentation-simplifiée" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> segmentation simplifiée<a href="clus.html#segmentation-simplifiée" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On commence va reconstruire un tableaux des individus x les thèmes. On garde les rangs comme indicateurs de l’importance .</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="clus.html#cb103-1" aria-hidden="true" tabindex="-1"></a>foo3<span class="ot">&lt;-</span>foo1<span class="sc">%&gt;%</span>  </span>
<span id="cb103-2"><a href="clus.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span><span class="st">&quot;theme&quot;</span>, <span class="at">values_from=</span><span class="st">&quot;r&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-3"><a href="clus.html#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>)</span>
<span id="cb103-4"><a href="clus.html#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(foo3, <span class="dv">8</span>)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 17
##       id L&#39;imm~1 Le po~2 L&#39;édu~3 L&#39;éga~4 Les r~5 L&#39;env~6 Le se~7 L&#39;ins~8 La sa~9
##    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 2.36e8       3       0       0       0       0       0       0       0       0
## 2 2.36e8       0       3       2       1       0       0       0       0       0
## 3 2.36e8       0       3       0       0       2       0       0       0       0
## 4 2.36e8       0       0       0       0       3       2       1       0       0
## 5 2.36e8       0       1       0       0       3       0       2       0       0
## 6 2.36e8       0       2       3       0       0       1       0       0       0
## 7 2.36e8       0       0       3       2       0       1       0       0       0
## 8 2.36e8       1       2       0       0       0       0       0       3       0
## # ... with 7 more variables: `Le chômage` &lt;dbl&gt;, `L&#39;économie` &lt;dbl&gt;,
## #   `La science et la technologie` &lt;dbl&gt;, `L&#39;identité nationale` &lt;dbl&gt;,
## #   `La sécurité nationale` &lt;dbl&gt;, `L&#39;union Européenne` &lt;dbl&gt;,
## #   `La culture` &lt;dbl&gt;, and abbreviated variable names 1: `L&#39;immigration`,
## #   2: `Le pouvoir d&#39;achat`, 3: `L&#39;éducation`, 4: `L&#39;égalité Homme/Femme`,
## #   5: `Les retraites`, 6: `L&#39;environnement`, 7: `Le service public`,
## #   8: `L&#39;insécurité`, 9: `La santé`</code></pre>
<p>On calcule un tableau de distance et on performe la classification automatique. dans cet essai on tente un modèle à 8 groupes.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="clus.html#cb105-1" aria-hidden="true" tabindex="-1"></a>foo4<span class="ot">&lt;-</span>foo3[,<span class="dv">2</span><span class="sc">:</span><span class="dv">17</span>]</span>
<span id="cb105-2"><a href="clus.html#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="clus.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co">#distance</span></span>
<span id="cb105-4"><a href="clus.html#cb105-4" aria-hidden="true" tabindex="-1"></a>d<span class="ot">&lt;-</span><span class="fu">dist</span>(foo4)</span>
<span id="cb105-5"><a href="clus.html#cb105-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-6"><a href="clus.html#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co">#clustering</span></span>
<span id="cb105-7"><a href="clus.html#cb105-7" aria-hidden="true" tabindex="-1"></a>h.D  <span class="ot">&lt;-</span> <span class="fu">hclust</span>(d, <span class="at">method=</span><span class="st">&quot;ward.D&quot;</span>)</span>
<span id="cb105-8"><a href="clus.html#cb105-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-9"><a href="clus.html#cb105-9" aria-hidden="true" tabindex="-1"></a><span class="co">#dendogramme</span></span>
<span id="cb105-10"><a href="clus.html#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(h.D,  <span class="at">hang=</span><span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb105-11"><a href="clus.html#cb105-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-12"><a href="clus.html#cb105-12" aria-hidden="true" tabindex="-1"></a><span class="co">#identification des clusters</span></span>
<span id="cb105-13"><a href="clus.html#cb105-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(h.D , <span class="at">k =</span> <span class="dv">8</span>, <span class="at">border =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0814-1.png" width="672" /></p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="clus.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co">#attribution des clusters</span></span>
<span id="cb106-2"><a href="clus.html#cb106-2" aria-hidden="true" tabindex="-1"></a>memb <span class="ot">&lt;-</span> <span class="fu">cutree</span>(h.D, <span class="at">k =</span> <span class="dv">8</span>)</span>
<span id="cb106-3"><a href="clus.html#cb106-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-4"><a href="clus.html#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="co">#maj du fichier de données avec l&#39;appartenace des individus aux groupes</span></span>
<span id="cb106-5"><a href="clus.html#cb106-5" aria-hidden="true" tabindex="-1"></a>foo5<span class="ot">&lt;-</span><span class="fu">cbind</span>(foo4, memb)</span></code></pre></div>
<p>Il reste à décrire les différents types sur les 16 variables qui les décrivent. On choisit une méthode de barre ordonnée avec un facetting par groupe.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="clus.html#cb107-1" aria-hidden="true" tabindex="-1"></a>foo6<span class="ot">&lt;-</span>foo5 <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="clus.html#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(memb) <span class="sc">%&gt;%</span></span>
<span id="cb107-3"><a href="clus.html#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>memb,<span class="at">names_to=</span><span class="st">&quot;Thèmes&quot;</span>,<span class="at">values_to=</span><span class="st">&quot;Valeurs&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb107-4"><a href="clus.html#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(memb,Thèmes)<span class="sc">%&gt;%</span></span>
<span id="cb107-5"><a href="clus.html#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Valeurs=</span><span class="fu">mean</span>(Valeurs))</span>
<span id="cb107-6"><a href="clus.html#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="clus.html#cb107-7" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">1</span>]<span class="ot">&lt;-</span><span class="st">&quot;multicritère&quot;</span></span>
<span id="cb107-8"><a href="clus.html#cb107-8" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">2</span>]<span class="ot">&lt;-</span><span class="st">&quot;Santé/Educ&quot;</span></span>
<span id="cb107-9"><a href="clus.html#cb107-9" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">3</span>]<span class="ot">&lt;-</span><span class="st">&quot;Pouvoir d&#39;achat/nretraites&quot;</span></span>
<span id="cb107-10"><a href="clus.html#cb107-10" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">5</span>]<span class="ot">&lt;-</span><span class="st">&quot;Immigration/nInsécurité &quot;</span></span>
<span id="cb107-11"><a href="clus.html#cb107-11" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">4</span>]<span class="ot">&lt;-</span><span class="st">&quot;égalité h/F&quot;</span></span>
<span id="cb107-12"><a href="clus.html#cb107-12" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">6</span>]<span class="ot">&lt;-</span><span class="st">&quot;Pouvoir d&#39;achat/nSanté&quot;</span></span>
<span id="cb107-13"><a href="clus.html#cb107-13" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">7</span>]<span class="ot">&lt;-</span><span class="st">&quot;Economie&quot;</span></span>
<span id="cb107-14"><a href="clus.html#cb107-14" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">8</span>]<span class="ot">&lt;-</span><span class="st">&quot;Environnement&quot;</span></span>
<span id="cb107-15"><a href="clus.html#cb107-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-16"><a href="clus.html#cb107-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb107-17"><a href="clus.html#cb107-17" aria-hidden="true" tabindex="-1"></a>brks<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="dv">1</span>,<span class="fl">1.5</span>,<span class="dv">2</span>, <span class="fl">2.5</span>,<span class="dv">3</span>)</span>
<span id="cb107-18"><a href="clus.html#cb107-18" aria-hidden="true" tabindex="-1"></a>p2<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(foo6, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Thèmes, Valeurs), <span class="at">y=</span>Valeurs))<span class="sc">+</span></span>
<span id="cb107-19"><a href="clus.html#cb107-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="fu">aes</span>(<span class="at">fill=</span><span class="fu">as.factor</span>(Thèmes)))<span class="sc">+</span></span>
<span id="cb107-20"><a href="clus.html#cb107-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(group), <span class="at">ncol=</span><span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb107-21"><a href="clus.html#cb107-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb107-22"><a href="clus.html#cb107-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>col)<span class="sc">+</span></span>
<span id="cb107-23"><a href="clus.html#cb107-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb107-24"><a href="clus.html#cb107-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span>brks)<span class="sc">+</span> </span>
<span id="cb107-25"><a href="clus.html#cb107-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>, <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">7</span>),<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">size=</span><span class="dv">2</span>))<span class="sc">+</span> </span>
<span id="cb107-26"><a href="clus.html#cb107-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Profils des segments</span><span class="sc">\n</span><span class="st">par importance des thématiques&quot;</span>, <span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="st">&quot;importance moyenne (de 0 à 3)&quot;</span>) </span>
<span id="cb107-27"><a href="clus.html#cb107-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-28"><a href="clus.html#cb107-28" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0815-1.png" width="672" /></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="clus.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment_p2.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb108-2"><a href="clus.html#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="clus.html#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wesanderson)</span>
<span id="cb108-4"><a href="clus.html#cb108-4" aria-hidden="true" tabindex="-1"></a>seg_col<span class="ot">&lt;-</span><span class="fu">wes_palette</span>(<span class="st">&quot;Zissou1&quot;</span>, <span class="dv">8</span>, <span class="at">type =</span> <span class="st">&quot;continuous&quot;</span>)</span>
<span id="cb108-5"><a href="clus.html#cb108-5" aria-hidden="true" tabindex="-1"></a>n<span class="ot">&lt;-</span><span class="fu">nrow</span>(foo5)</span>
<span id="cb108-6"><a href="clus.html#cb108-6" aria-hidden="true" tabindex="-1"></a>foo6<span class="ot">&lt;-</span>foo5 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb108-7"><a href="clus.html#cb108-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(memb)<span class="sc">%&gt;%</span></span>
<span id="cb108-8"><a href="clus.html#cb108-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq=</span><span class="fu">sum</span>(n, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span> <span class="fu">mutate</span>( <span class="at">freq=</span>freq<span class="sc">/</span>n)</span>
<span id="cb108-9"><a href="clus.html#cb108-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-10"><a href="clus.html#cb108-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-11"><a href="clus.html#cb108-11" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">1</span>]<span class="ot">&lt;-</span><span class="st">&quot;multicritère&quot;</span></span>
<span id="cb108-12"><a href="clus.html#cb108-12" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">2</span>]<span class="ot">&lt;-</span><span class="st">&quot;Santé/Educ&quot;</span></span>
<span id="cb108-13"><a href="clus.html#cb108-13" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">3</span>]<span class="ot">&lt;-</span><span class="st">&quot;Pouvoir d&#39;achat/nretraites&quot;</span></span>
<span id="cb108-14"><a href="clus.html#cb108-14" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">5</span>]<span class="ot">&lt;-</span><span class="st">&quot;Immigration/nInsécurité &quot;</span></span>
<span id="cb108-15"><a href="clus.html#cb108-15" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">4</span>]<span class="ot">&lt;-</span><span class="st">&quot;égalité h/F&quot;</span></span>
<span id="cb108-16"><a href="clus.html#cb108-16" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">6</span>]<span class="ot">&lt;-</span><span class="st">&quot;Pouvoir d&#39;achat/nSanté&quot;</span></span>
<span id="cb108-17"><a href="clus.html#cb108-17" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">7</span>]<span class="ot">&lt;-</span><span class="st">&quot;Economie&quot;</span></span>
<span id="cb108-18"><a href="clus.html#cb108-18" aria-hidden="true" tabindex="-1"></a>foo6<span class="sc">$</span>group[foo6<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">8</span>]<span class="ot">&lt;-</span><span class="st">&quot;Environnement&quot;</span></span>
<span id="cb108-19"><a href="clus.html#cb108-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-20"><a href="clus.html#cb108-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-21"><a href="clus.html#cb108-21" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(foo6, <span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>freq))<span class="sc">+</span></span>
<span id="cb108-22"><a href="clus.html#cb108-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="fu">aes</span>(<span class="at">fill=</span>group))<span class="sc">+</span></span>
<span id="cb108-23"><a href="clus.html#cb108-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>seg_col) <span class="sc">+</span> </span>
<span id="cb108-24"><a href="clus.html#cb108-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span> </span>
<span id="cb108-25"><a href="clus.html#cb108-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Poids des segments&quot;</span>, <span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="st">&quot;Proportion&quot;</span>)<span class="sc">+</span>  </span>
<span id="cb108-26"><a href="clus.html#cb108-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span>brks,<span class="at">labels=</span>percent)<span class="sc">+</span>  </span>
<span id="cb108-27"><a href="clus.html#cb108-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb108-28"><a href="clus.html#cb108-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-29"><a href="clus.html#cb108-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment_p1.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb108-30"><a href="clus.html#cb108-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-31"><a href="clus.html#cb108-31" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_grid</span>(p1, p2, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>), <span class="at">label_size =</span> <span class="dv">12</span>, <span class="at">ncol=</span><span class="dv">1</span>,<span class="at">rel_heights =</span>  <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0815-2.png" width="672" /></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="clus.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span></code></pre></div>
</div>
<div id="tableaux-croisés-de-la-typologie-et-des-critères-sociaux-démos" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> tableaux croisés de la typologie et des critères sociaux démos<a href="clus.html#tableaux-croisés-de-la-typologie-et-des-critères-sociaux-démos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On revient à une approche descriptive, on croisant successivement notre variable typologie avec les critères socio-demo qui ont été mesurés dans l’enquête.</p>
<p>( une boucle simplifierait ! )</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="clus.html#cb110-1" aria-hidden="true" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">cbind</span>(df,foo5)</span>
<span id="cb110-2"><a href="clus.html#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="clus.html#cb110-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">1</span>]<span class="ot">&lt;-</span><span class="st">&quot;multicritère&quot;</span></span>
<span id="cb110-4"><a href="clus.html#cb110-4" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">2</span>]<span class="ot">&lt;-</span><span class="st">&quot;Santé/Educ&quot;</span></span>
<span id="cb110-5"><a href="clus.html#cb110-5" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">3</span>]<span class="ot">&lt;-</span><span class="st">&quot;Pouvoir d&#39;achat/nretraites&quot;</span></span>
<span id="cb110-6"><a href="clus.html#cb110-6" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">5</span>]<span class="ot">&lt;-</span><span class="st">&quot;Immigration/nInsécurité &quot;</span></span>
<span id="cb110-7"><a href="clus.html#cb110-7" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">4</span>]<span class="ot">&lt;-</span><span class="st">&quot;égalité h/F&quot;</span></span>
<span id="cb110-8"><a href="clus.html#cb110-8" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">6</span>]<span class="ot">&lt;-</span><span class="st">&quot;Pouvoir d&#39;achat/nSanté&quot;</span></span>
<span id="cb110-9"><a href="clus.html#cb110-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">7</span>]<span class="ot">&lt;-</span><span class="st">&quot;Economie&quot;</span></span>
<span id="cb110-10"><a href="clus.html#cb110-10" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group[df<span class="sc">$</span>memb<span class="sc">==</span><span class="dv">8</span>]<span class="ot">&lt;-</span><span class="st">&quot;Environnement&quot;</span></span>
<span id="cb110-11"><a href="clus.html#cb110-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-12"><a href="clus.html#cb110-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-13"><a href="clus.html#cb110-13" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span>df <span class="sc">%&gt;%</span> </span>
<span id="cb110-14"><a href="clus.html#cb110-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, Sensibilité) <span class="sc">%&gt;%</span> </span>
<span id="cb110-15"><a href="clus.html#cb110-15" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb110-16"><a href="clus.html#cb110-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop=</span><span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">3</span>), <span class="at">cum=</span><span class="dv">1</span> <span class="sc">-</span> (<span class="fu">cumsum</span>(prop)<span class="sc">-</span>prop<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb110-17"><a href="clus.html#cb110-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-18"><a href="clus.html#cb110-18" aria-hidden="true" tabindex="-1"></a>g01<span class="ot">&lt;-</span><span class="fu">ggplot</span>(foo,<span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>prop, <span class="at">group=</span>Sensibilité))<span class="sc">+</span></span>
<span id="cb110-19"><a href="clus.html#cb110-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="fu">aes</span>(<span class="at">y =</span> prop, <span class="at">fill=</span>Sensibilité)) <span class="sc">+</span> </span>
<span id="cb110-20"><a href="clus.html#cb110-20" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> brks, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent</span>(brks)) <span class="sc">+</span></span>
<span id="cb110-21"><a href="clus.html#cb110-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>SensiP2) <span class="sc">+</span> </span>
<span id="cb110-22"><a href="clus.html#cb110-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> prop, <span class="at">y=</span>cum),<span class="at">size=</span><span class="dv">2</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb110-23"><a href="clus.html#cb110-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb110-24"><a href="clus.html#cb110-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Types d&#39;attentes par sensibilité politique &quot;</span>, </span>
<span id="cb110-25"><a href="clus.html#cb110-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>,)<span class="sc">+</span></span>
<span id="cb110-26"><a href="clus.html#cb110-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)) </span>
<span id="cb110-27"><a href="clus.html#cb110-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-28"><a href="clus.html#cb110-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-29"><a href="clus.html#cb110-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-30"><a href="clus.html#cb110-30" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment01.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb110-31"><a href="clus.html#cb110-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-32"><a href="clus.html#cb110-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-33"><a href="clus.html#cb110-33" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span>df <span class="sc">%&gt;%</span> </span>
<span id="cb110-34"><a href="clus.html#cb110-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, Age) <span class="sc">%&gt;%</span> </span>
<span id="cb110-35"><a href="clus.html#cb110-35" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb110-36"><a href="clus.html#cb110-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop=</span><span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">3</span>), <span class="at">cum=</span><span class="dv">1</span> <span class="sc">-</span> (<span class="fu">cumsum</span>(prop)<span class="sc">-</span>prop<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb110-37"><a href="clus.html#cb110-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-38"><a href="clus.html#cb110-38" aria-hidden="true" tabindex="-1"></a>g02<span class="ot">&lt;-</span><span class="fu">ggplot</span>(foo,<span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>prop, <span class="at">group=</span>Age))<span class="sc">+</span></span>
<span id="cb110-39"><a href="clus.html#cb110-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="fu">aes</span>(<span class="at">y =</span> prop, <span class="at">fill=</span>Age)) <span class="sc">+</span> </span>
<span id="cb110-40"><a href="clus.html#cb110-40" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> brks, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent</span>(brks)) <span class="sc">+</span></span>
<span id="cb110-41"><a href="clus.html#cb110-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> prop, <span class="at">y=</span>cum),<span class="at">size=</span><span class="dv">2</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb110-42"><a href="clus.html#cb110-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb110-43"><a href="clus.html#cb110-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Types d&#39;attentes par classe d&#39;âge &quot;</span>, </span>
<span id="cb110-44"><a href="clus.html#cb110-44" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>,)<span class="sc">+</span><span class="fu">theme_bw</span>()  <span class="sc">+</span></span>
<span id="cb110-45"><a href="clus.html#cb110-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)) </span>
<span id="cb110-46"><a href="clus.html#cb110-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-47"><a href="clus.html#cb110-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-48"><a href="clus.html#cb110-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-49"><a href="clus.html#cb110-49" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment02.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb110-50"><a href="clus.html#cb110-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-51"><a href="clus.html#cb110-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-52"><a href="clus.html#cb110-52" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span>df <span class="sc">%&gt;%</span> </span>
<span id="cb110-53"><a href="clus.html#cb110-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, Sexe) <span class="sc">%&gt;%</span> </span>
<span id="cb110-54"><a href="clus.html#cb110-54" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb110-55"><a href="clus.html#cb110-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop=</span><span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">3</span>), <span class="at">cum=</span><span class="dv">1</span> <span class="sc">-</span> (<span class="fu">cumsum</span>(prop)<span class="sc">-</span>prop<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb110-56"><a href="clus.html#cb110-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-57"><a href="clus.html#cb110-57" aria-hidden="true" tabindex="-1"></a>g03<span class="ot">&lt;-</span><span class="fu">ggplot</span>(foo,<span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>prop, <span class="at">group=</span>Sexe))<span class="sc">+</span></span>
<span id="cb110-58"><a href="clus.html#cb110-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="fu">aes</span>(<span class="at">y =</span> prop, <span class="at">fill=</span>Sexe)) <span class="sc">+</span> </span>
<span id="cb110-59"><a href="clus.html#cb110-59" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> brks, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent</span>(brks)) <span class="sc">+</span></span>
<span id="cb110-60"><a href="clus.html#cb110-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> prop, <span class="at">y=</span>cum),<span class="at">size=</span><span class="dv">2</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb110-61"><a href="clus.html#cb110-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb110-62"><a href="clus.html#cb110-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Types d&#39;attentes par genre &quot;</span>, </span>
<span id="cb110-63"><a href="clus.html#cb110-63" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>,)<span class="sc">+</span></span>
<span id="cb110-64"><a href="clus.html#cb110-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>))</span>
<span id="cb110-65"><a href="clus.html#cb110-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-66"><a href="clus.html#cb110-66" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment03.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb110-67"><a href="clus.html#cb110-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-68"><a href="clus.html#cb110-68" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span>df <span class="sc">%&gt;%</span> </span>
<span id="cb110-69"><a href="clus.html#cb110-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, Education) <span class="sc">%&gt;%</span> </span>
<span id="cb110-70"><a href="clus.html#cb110-70" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb110-71"><a href="clus.html#cb110-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop=</span><span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">3</span>), <span class="at">cum=</span><span class="dv">1</span> <span class="sc">-</span> (<span class="fu">cumsum</span>(prop)<span class="sc">-</span>prop<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb110-72"><a href="clus.html#cb110-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-73"><a href="clus.html#cb110-73" aria-hidden="true" tabindex="-1"></a>g04<span class="ot">&lt;-</span><span class="fu">ggplot</span>(foo,<span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>prop, <span class="at">group=</span>Education))<span class="sc">+</span></span>
<span id="cb110-74"><a href="clus.html#cb110-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="fu">aes</span>(<span class="at">y =</span> prop, <span class="at">fill=</span>Education)) <span class="sc">+</span> </span>
<span id="cb110-75"><a href="clus.html#cb110-75" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> brks, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent</span>(brks)) <span class="sc">+</span></span>
<span id="cb110-76"><a href="clus.html#cb110-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span> </span>
<span id="cb110-77"><a href="clus.html#cb110-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> prop, <span class="at">y=</span>cum),<span class="at">size=</span><span class="fl">1.5</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb110-78"><a href="clus.html#cb110-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb110-79"><a href="clus.html#cb110-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Types d&#39;attentes par niveau d&#39;éducation &quot;</span>, </span>
<span id="cb110-80"><a href="clus.html#cb110-80" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>,)<span class="sc">+</span></span>
<span id="cb110-81"><a href="clus.html#cb110-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)) </span>
<span id="cb110-82"><a href="clus.html#cb110-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb110-83"><a href="clus.html#cb110-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-84"><a href="clus.html#cb110-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-85"><a href="clus.html#cb110-85" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment04.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb110-86"><a href="clus.html#cb110-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-87"><a href="clus.html#cb110-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-88"><a href="clus.html#cb110-88" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_grid</span>(g01, g02, g04,g03,  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>, <span class="st">&#39;D&#39;</span>), <span class="at">label_size =</span> <span class="dv">11</span>, <span class="at">ncol=</span><span class="dv">2</span>,<span class="at">rel_widths =</span>  <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>))</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0817-1.png" width="672" /></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="clus.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./plot/g_segment05.jpg&quot;</span>,<span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span></code></pre></div>
</div>
<div id="afcm-pour-une-synthèse" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> AFCM pour une synthèse<a href="clus.html#afcm-pour-une-synthèse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>C’est le bon moment de donner une seconde illustration de l’utilité de l’AFCM. Pourquoi ne pas synthétiser en une carte l’ensemble des relations statistiques.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="clus.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb112-2"><a href="clus.html#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb112-3"><a href="clus.html#cb112-3" aria-hidden="true" tabindex="-1"></a>X<span class="ot">&lt;-</span>df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>( group, Age, Sexe, Sensibilité, Situation2)</span>
<span id="cb112-4"><a href="clus.html#cb112-4" aria-hidden="true" tabindex="-1"></a>res<span class="ot">&lt;-</span><span class="fu">MCA</span>(X, <span class="at">graph =</span><span class="cn">FALSE</span>)</span>
<span id="cb112-5"><a href="clus.html#cb112-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-6"><a href="clus.html#cb112-6" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(res<span class="sc">$</span>var<span class="sc">$</span>coord) <span class="sc">%&gt;%</span></span>
<span id="cb112-7"><a href="clus.html#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var=</span><span class="st">&quot;var&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb112-8"><a href="clus.html#cb112-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">dim1=</span><span class="dv">2</span>, <span class="at">dim2=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb112-9"><a href="clus.html#cb112-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_rownames</span>(<span class="at">var =</span> <span class="st">&quot;rowname&quot;</span>)</span>
<span id="cb112-10"><a href="clus.html#cb112-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-11"><a href="clus.html#cb112-11" aria-hidden="true" tabindex="-1"></a>foo<span class="sc">$</span>rowname<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(foo<span class="sc">$</span>rowname) </span>
<span id="cb112-12"><a href="clus.html#cb112-12" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span>foo <span class="sc">%&gt;%</span>   <span class="fu">mutate</span>(<span class="at">label=</span><span class="fu">ifelse</span>(rowname<span class="sc">&lt;</span><span class="dv">9</span>, <span class="st">&quot;groupe&quot;</span>, <span class="st">&quot;&quot;</span>))</span>
<span id="cb112-13"><a href="clus.html#cb112-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-14"><a href="clus.html#cb112-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-15"><a href="clus.html#cb112-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-16"><a href="clus.html#cb112-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(foo, <span class="fu">aes</span>(<span class="at">x=</span>dim1, <span class="at">y=</span>dim2, <span class="at">label=</span> var) )<span class="sc">+</span></span>
<span id="cb112-17"><a href="clus.html#cb112-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb112-18"><a href="clus.html#cb112-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>var, <span class="at">color=</span>label),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb112-19"><a href="clus.html#cb112-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">labs</span>( <span class="at">title=</span> <span class="st">&quot;AFCM&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0820-1.png" width="672" /></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="clus.html#cb113-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<pre><code>## List of 1
##  $ legend.position: chr &quot;none&quot;
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;theme&quot; &quot;gg&quot;
##  - attr(*, &quot;complete&quot;)= logi FALSE
##  - attr(*, &quot;validate&quot;)= logi TRUE</code></pre>
<div id="forces-et-limites" class="section level3 hasAnchor" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> Forces et limites<a href="clus.html#forces-et-limites" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>forces : graphiques, complète</li>
<li>limites : petite population</li>
</ul>
</div>
</div>
<div id="les-méthodes-non-hiérarchiques" class="section level2 hasAnchor" number="9.5">
<h2><span class="header-section-number">9.5</span> Les méthodes non-hiérarchiques<a href="clus.html#les-méthodes-non-hiérarchiques" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>La première d’entre elles est la méthode k-means dont le principe est très simple : plutôt que de calculer toutes les distances entre tous les objets, on va se concentrer sur les distances en k group supposés et les n individus. L’hyperparamètre est ici le nombre de groupes</p>
<div id="principe" class="section level3 hasAnchor" number="9.5.1">
<h3><span class="header-section-number">9.5.1</span> principe<a href="clus.html#principe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="application-1" class="section level3 hasAnchor" number="9.5.2">
<h3><span class="header-section-number">9.5.2</span> Application<a href="clus.html#application-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="le-problème-de-la-détermination-du-nombre-optimal-de-groupe" class="section level3 hasAnchor" number="9.5.3">
<h3><span class="header-section-number">9.5.3</span> Le problème de la détermination du nombre optimal de groupe<a href="clus.html#le-problème-de-la-détermination-du-nombre-optimal-de-groupe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>méthode du coude</li>
<li>méthode silhouette</li>
<li>gap statistics</li>
</ul>
</div>
</div>
<div id="autres-méthodes" class="section level2 hasAnchor" number="9.6">
<h2><span class="header-section-number">9.6</span> Autres méthodes<a href="clus.html#autres-méthodes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>de nombreuses variantes sont disponibles</p>
<ul>
<li>mediane</li>
<li>kernel</li>
<li>les méthodes fuzzy : l’appartenance n’est pas exclusive mais probabilistique</li>
<li>les méthode de classes latentes</li>
<li>les méthodes de densités s’appuie sur l’idée que la continuité d’un groupe s’exprime en terme s de densités
** paramètriques
** non - paramètriques <a href="http://www.sthda.com/english/wiki/wiki.php?id_contents=7940" class="uri">http://www.sthda.com/english/wiki/wiki.php?id_contents=7940</a></li>
</ul>
<p>: <a href="https://link.springer.com/referenceworkentry/10.1007%2F978-0-387-30164-8_211" class="uri">https://link.springer.com/referenceworkentry/10.1007%2F978-0-387-30164-8_211</a></p>
</div>
<div id="conclusion-1" class="section level2 hasAnchor" number="9.7">
<h2><span class="header-section-number">9.7</span> Conclusion<a href="clus.html#conclusion-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-sneath_numerical_1973" class="csl-entry">
Sneath, P. H. A., and Robert R. Sokal. 1973. <em>Numerical Taxonomy: The Principles and Practice of Numerical Classification</em>. A <span>Series</span> of Books in Biology. San Francisco: W. H. Freeman.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analyses-factorielles-exploratoires.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="régression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/08-clustering.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
