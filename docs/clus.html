<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 8 Clustering | Introduction aux Data Sciences</title>
  <meta name="description" content="Cours d’analyse de données et de Datascience" />
  <meta name="generator" content="bookdown 0.22.3 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 8 Clustering | Introduction aux Data Sciences" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Cours d’analyse de données et de Datascience" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 8 Clustering | Introduction aux Data Sciences" />
  
  <meta name="twitter:description" content="Cours d’analyse de données et de Datascience" />
  

<meta name="author" content="Christophe Benavent - Université Paris Dauphine" />


<meta name="date" content="2022-03-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analyses-factorielles.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NLP en r et en français</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Préface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#plan-du-manuel"><i class="fa fa-check"></i><b>1.1</b> Plan du manuel</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#les-jeux-de-données"><i class="fa fa-check"></i><b>1.2</b> Les jeux de données</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#le-cadre-technique-et-les-packages-utilisés"><i class="fa fa-check"></i><b>1.3</b> Le cadre technique et les packages utilisés</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#a-faire"><i class="fa fa-check"></i><b>1.4</b> A faire</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction aux data sciences</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#objectif-et-sommaire"><i class="fa fa-check"></i><b>2.1</b> Objectif et sommaire</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#science-ou-technique"><i class="fa fa-check"></i><b>2.2</b> Science ou technique ?</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#histoires-des-logiciels-statistiques"><i class="fa fa-check"></i><b>2.3</b> histoires des logiciels statistiques</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#le-processus-de-traitement-des-données"><i class="fa fa-check"></i><b>2.4</b> Le processus de traitement des données</a></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#les-facteurs-de-développement-des-datasciences"><i class="fa fa-check"></i><b>2.5</b> Les facteurs de développement des datasciences</a><ul>
<li class="chapter" data-level="2.5.1" data-path="intro.html"><a href="intro.html#une-lingua-franca"><i class="fa fa-check"></i><b>2.5.1</b> Une lingua franca</a></li>
<li class="chapter" data-level="2.5.2" data-path="intro.html"><a href="intro.html#une-communauté"><i class="fa fa-check"></i><b>2.5.2</b> Une communauté</a></li>
<li class="chapter" data-level="2.5.3" data-path="intro.html"><a href="intro.html#la-multiplication-des-sources-de-données."><i class="fa fa-check"></i><b>2.5.3</b> La multiplication des sources de données.</a></li>
<li class="chapter" data-level="2.5.4" data-path="intro.html"><a href="intro.html#du-ml-à-lia"><i class="fa fa-check"></i><b>2.5.4</b> du ML à l’IA</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="prise-en-main.html"><a href="prise-en-main.html"><i class="fa fa-check"></i><b>3</b> Prise en main</a><ul>
<li class="chapter" data-level="3.1" data-path="prise-en-main.html"><a href="prise-en-main.html#la-convention-du-rmarkdown"><i class="fa fa-check"></i><b>3.1</b> La convention du Rmarkdown</a></li>
<li class="chapter" data-level="3.2" data-path="prise-en-main.html"><a href="prise-en-main.html#lire-les-données"><i class="fa fa-check"></i><b>3.2</b> Lire les données</a><ul>
<li class="chapter" data-level="3.2.1" data-path="prise-en-main.html"><a href="prise-en-main.html#la-diversité-des-formats"><i class="fa fa-check"></i><b>3.2.1</b> La diversité des formats</a></li>
<li class="chapter" data-level="3.2.2" data-path="prise-en-main.html"><a href="prise-en-main.html#les-autres-accès-aux-données"><i class="fa fa-check"></i><b>3.2.2</b> Les autres accès aux données</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="prise-en-main.html"><a href="prise-en-main.html#dplyr-pour-manipuler-les-données"><i class="fa fa-check"></i><b>3.3</b> <code>Dplyr</code> pour manipuler les données</a><ul>
<li class="chapter" data-level="3.3.1" data-path="prise-en-main.html"><a href="prise-en-main.html#des-pipes"><i class="fa fa-check"></i><b>3.3.1</b> Des pipes %&gt;%</a></li>
<li class="chapter" data-level="3.3.2" data-path="prise-en-main.html"><a href="prise-en-main.html#des-verbes"><i class="fa fa-check"></i><b>3.3.2</b> Des verbes</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="prise-en-main.html"><a href="prise-en-main.html#pour-aller-plus-loin"><i class="fa fa-check"></i><b>3.4</b> Pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analyses-univariées.html"><a href="analyses-univariées.html"><i class="fa fa-check"></i><b>4</b> Analyses univariées</a><ul>
<li class="chapter" data-level="4.1" data-path="analyses-univariées.html"><a href="analyses-univariées.html#la-grammaire-des-graphiques"><i class="fa fa-check"></i><b>4.1</b> La grammaire des graphiques</a><ul>
<li class="chapter" data-level="4.1.1" data-path="analyses-univariées.html"><a href="analyses-univariées.html#un-modèle-en-couche"><i class="fa fa-check"></i><b>4.1.1</b> Un modèle en couche</a></li>
<li class="chapter" data-level="4.1.2" data-path="analyses-univariées.html"><a href="analyses-univariées.html#une-typologie-des-représentations"><i class="fa fa-check"></i><b>4.1.2</b> Une typologie des représentations</a></li>
<li class="chapter" data-level="4.1.3" data-path="analyses-univariées.html"><a href="analyses-univariées.html#lesthétique"><i class="fa fa-check"></i><b>4.1.3</b> L’esthétique</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="analyses-univariées.html"><a href="analyses-univariées.html#une-étude-de-cas"><i class="fa fa-check"></i><b>4.2</b> Une étude de cas</a><ul>
<li class="chapter" data-level="4.2.1" data-path="analyses-univariées.html"><a href="analyses-univariées.html#le-cas-des-variables-quantitatives"><i class="fa fa-check"></i><b>4.2.1</b> Le cas des variables quantitatives</a></li>
<li class="chapter" data-level="4.2.2" data-path="analyses-univariées.html"><a href="analyses-univariées.html#quand-la-variable-est-qualitative"><i class="fa fa-check"></i><b>4.2.2</b> Quand la variable est qualitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analyse-bi-variée.html"><a href="analyse-bi-variée.html"><i class="fa fa-check"></i><b>5</b> Analyse bi variée</a><ul>
<li class="chapter" data-level="5.1" data-path="analyse-bi-variée.html"><a href="analyse-bi-variée.html#diagrammes-xy---la-magie-des-corrélations"><i class="fa fa-check"></i><b>5.1</b> Diagrammes xy - la magie des corrélations</a></li>
<li class="chapter" data-level="5.2" data-path="analyse-bi-variée.html"><a href="analyse-bi-variée.html#comparer-les-distributions-et-des-moyennes"><i class="fa fa-check"></i><b>5.2</b> Comparer les distributions et des moyennes</a><ul>
<li class="chapter" data-level="5.2.1" data-path="analyse-bi-variée.html"><a href="analyse-bi-variée.html#comparaison-de-moyennes"><i class="fa fa-check"></i><b>5.2.1</b> Comparaison de moyennes</a></li>
<li class="chapter" data-level="5.2.2" data-path="analyse-bi-variée.html"><a href="analyse-bi-variée.html#deux-variables-qualitatives"><i class="fa fa-check"></i><b>5.2.2</b> Deux variables qualitatives</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="analyse-graphique-multivariée.html"><a href="analyse-graphique-multivariée.html"><i class="fa fa-check"></i><b>6</b> Analyse graphique multivariée</a><ul>
<li class="chapter" data-level="6.1" data-path="analyse-graphique-multivariée.html"><a href="analyse-graphique-multivariée.html#la-confiance-institutionnelle-en-détail"><i class="fa fa-check"></i><b>6.1</b> La confiance institutionnelle, en détail</a></li>
<li class="chapter" data-level="6.2" data-path="analyse-graphique-multivariée.html"><a href="analyse-graphique-multivariée.html#table-de-corrélation"><i class="fa fa-check"></i><b>6.2</b> Table de corrélation</a></li>
<li class="chapter" data-level="6.3" data-path="analyse-graphique-multivariée.html"><a href="analyse-graphique-multivariée.html#un-cas-plus-complexe-présidentielle2020"><i class="fa fa-check"></i><b>6.3</b> Un cas plus complexe : présidentielle2020</a></li>
<li class="chapter" data-level="6.4" data-path="analyse-graphique-multivariée.html"><a href="analyse-graphique-multivariée.html#une-boucle-pour-produire-de-multiple-graphe-en-variant-un-paramètre"><i class="fa fa-check"></i><b>6.4</b> une boucle pour produire de multiple graphe en variant un paramètre</a><ul>
<li class="chapter" data-level="6.4.1" data-path="analyse-graphique-multivariée.html"><a href="analyse-graphique-multivariée.html#effet-sondeur"><i class="fa fa-check"></i><b>6.4.1</b> effet sondeur</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="analyse-graphique-multivariée.html"><a href="analyse-graphique-multivariée.html#modéliser-le-biais-du-sondeur"><i class="fa fa-check"></i><b>6.5</b> Modéliser le biais du sondeur</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html"><i class="fa fa-check"></i><b>7</b> Analyses factorielles</a><ul>
<li class="chapter" data-level="7.1" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#origine-et-histoire"><i class="fa fa-check"></i><b>7.1</b> Origine et histoire</a><ul>
<li class="chapter" data-level="7.1.1" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#une-petite-histoire-de-la-psychométrie"><i class="fa fa-check"></i><b>7.1.1</b> Une petite histoire de la psychométrie</a></li>
<li class="chapter" data-level="7.1.2" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#lécole-française-de-lanalyse-des-données-appliquée-aux-sciences-sociales"><i class="fa fa-check"></i><b>7.1.2</b> L’école française de l’analyse des données appliquée aux sciences sociales</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#le-modèle-factoriel-des-tests-psychologiques"><i class="fa fa-check"></i><b>7.2</b> Le modèle factoriel des tests psychologiques</a><ul>
<li class="chapter" data-level="7.2.1" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#un-peu-de-théorie"><i class="fa fa-check"></i><b>7.2.1</b> Un peu de théorie</a></li>
<li class="chapter" data-level="7.2.2" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#lestimation"><i class="fa fa-check"></i><b>7.2.2</b> L’estimation</a></li>
<li class="chapter" data-level="7.2.3" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#ressources"><i class="fa fa-check"></i><b>7.2.3</b> Ressources</a></li>
<li class="chapter" data-level="7.2.4" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#cas-dapplication"><i class="fa fa-check"></i><b>7.2.4</b> Cas d’application</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#examen-de-la-matrice-de-corrélation"><i class="fa fa-check"></i><b>7.3</b> Examen de la matrice de corrélation</a></li>
<li class="chapter" data-level="7.4" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#modèle-factoriel"><i class="fa fa-check"></i><b>7.4</b> Modèle factoriel</a></li>
<li class="chapter" data-level="7.5" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#lanalyse-en-composante-principale"><i class="fa fa-check"></i><b>7.5</b> L’analyse en composante principale</a><ul>
<li class="chapter" data-level="7.5.1" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#le-problème-théorique"><i class="fa fa-check"></i><b>7.5.1</b> le problème théorique</a></li>
<li class="chapter" data-level="7.5.2" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#une-représentation-symbolique"><i class="fa fa-check"></i><b>7.5.2</b> Une représentation symbolique</a></li>
<li class="chapter" data-level="7.5.3" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#application"><i class="fa fa-check"></i><b>7.5.3</b> Application</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#une-généralisation-de-lacp-lafc"><i class="fa fa-check"></i><b>7.6</b> Une généralisation de l’ACP : l’AFC</a><ul>
<li class="chapter" data-level="7.6.1" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#afcm-multiple"><i class="fa fa-check"></i><b>7.6.1</b> AFCM multiple</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#développements"><i class="fa fa-check"></i><b>7.7</b> Développements</a><ul>
<li class="chapter" data-level="7.7.1" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#le-svd"><i class="fa fa-check"></i><b>7.7.1</b> le SVD</a></li>
<li class="chapter" data-level="7.7.2" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#acm-analyse-canonique-analyse-discriminante"><i class="fa fa-check"></i><b>7.7.2</b> ACM , analyse canonique , analyse discriminante</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="analyses-factorielles.html"><a href="analyses-factorielles.html#en-conclusion"><i class="fa fa-check"></i><b>7.8</b> En conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="clus.html"><a href="clus.html"><i class="fa fa-check"></i><b>8</b> Clustering</a><ul>
<li class="chapter" data-level="8.1" data-path="clus.html"><a href="clus.html#les-méthodes-hiérarchiques-ascendantes"><i class="fa fa-check"></i><b>8.1</b> Les méthodes hiérarchiques ascendantes</a><ul>
<li class="chapter" data-level="8.1.1" data-path="clus.html"><a href="clus.html#mise-en-oeuvre"><i class="fa fa-check"></i><b>8.1.1</b> Mise en oeuvre</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="clus.html"><a href="clus.html#segmentation-simplifiée"><i class="fa fa-check"></i><b>8.2</b> segmentation simplifiée</a></li>
<li class="chapter" data-level="8.3" data-path="clus.html"><a href="clus.html#tableaux-croisés-de-la-typologie-et-des-critères-sociaux-démos"><i class="fa fa-check"></i><b>8.3</b> tableaux croisés de la typologie et des critères sociaux démos</a></li>
<li class="chapter" data-level="8.4" data-path="clus.html"><a href="clus.html#afcm-pour-une-synthèse"><i class="fa fa-check"></i><b>8.4</b> AFCM pour une synthèse</a><ul>
<li class="chapter" data-level="8.4.1" data-path="clus.html"><a href="clus.html#forces-et-limites"><i class="fa fa-check"></i><b>8.4.1</b> Forces et limites</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="clus.html"><a href="clus.html#les-méthodes-non-hiérarchiques"><i class="fa fa-check"></i><b>8.5</b> Les méthodes non-hiérarchiques</a><ul>
<li class="chapter" data-level="8.5.1" data-path="clus.html"><a href="clus.html#principe"><i class="fa fa-check"></i><b>8.5.1</b> principe</a></li>
<li class="chapter" data-level="8.5.2" data-path="clus.html"><a href="clus.html#application-1"><i class="fa fa-check"></i><b>8.5.2</b> Application</a></li>
<li class="chapter" data-level="8.5.3" data-path="clus.html"><a href="clus.html#le-problème-de-la-détermination-du-nombre-optimal-de-groupe"><i class="fa fa-check"></i><b>8.5.3</b> Le problème de la détermination du nombre optimal de groupe</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="clus.html"><a href="clus.html#autres-méthodes"><i class="fa fa-check"></i><b>8.6</b> Autres méthodes</a></li>
<li class="chapter" data-level="8.7" data-path="clus.html"><a href="clus.html#conclusion"><i class="fa fa-check"></i><b>8.7</b> Conclusion</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction aux Data Sciences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clus" class="section level1">
<h1><span class="header-section-number">Chapitre 8</span> Clustering</h1>
<p>L’objectif des méthodes de classification automatique est de regrouper des observations qui se ressemblent sur un ensemble multidimensionnel de caractéristiques.</p>
<p>insérer image</p>
<p>Dans ce chapitre nous examinons deux familles de méthodes qui le distingue par la procédure de calcul : hierarchique d’une part, non hiérarchique de l’autre. On garde pour le chapître suivant l’étude des modèles de décisions qui ont une longue et riche histoire en marketing et ont préparé le développement de certains modèles de machine learning.</p>
<div id="les-méthodes-hiérarchiques-ascendantes" class="section level2">
<h2><span class="header-section-number">8.1</span> Les méthodes hiérarchiques ascendantes</h2>
<p>Elles trouvent leur origine en biologie où dès les années 1930 Sokal et Sneath<span class="citation">(Sneath and Sokal <a href="#ref-sneath_numerical_1973" role="doc-biblioref">1973</a>)</span> ont proposé des méthodes pour analyser l’évolution des espèces. L’idée réside dans la comparison de specimens sur la base d’un certains nombre de caractéristiques, d’abord des caractères phénotypiques, puis dans ce domaine en s’appuyant sur les caractéristiques génétiques. Nous n’entrerons pas dans une discussion plus approfondis mais signalons que ces choix déterminent des méthodes et des hypothèses très différentes et largement débattues (cladistique etc)</p>
<p>Prenons le cas de différences phénotypiques et le tableau suivant.</p>
<p>tableau</p>
<p>Le but du jeu est de regrouper successivement les spécimens en fonction de leur ressemblance. L’algorithme consiste simplement à 1) calculer toutes les ressemblances deux à deux et 2) à fondre en une classe les deux éléments qui se ressemble le plus. On réitère l’opération jusqu’à ce qu’on obtienne plus qu’une classe.</p>
<p>Le résultat est une arborescence dont chaque noeud représente un regrouppement de classe à un certain niveau de distance.</p>
<p>figure</p>
<p>Leurs variétés dépend de deux paramètres :</p>
<ul>
<li>le choix de la mesure de dissimilarités : Une distance euclidienne ? Son carré ? Une distance binaire comme l’indice de Jaccard?</li>
<li>le choix de la méthode d’agrégation : que choisit-on pour calculer la distance entre deux classes A et B : la plus grande des distances entre les éléments de A et ceux de B ? La plus petite ? La distance moyennes, la médiane ?</li>
</ul>
<div id="mise-en-oeuvre" class="section level3">
<h3><span class="header-section-number">8.1.1</span> Mise en oeuvre</h3>
<p>On utilise l’enquête d’happydemics sur la période de fin mars.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1">df&lt;-<span class="kw">readRDS</span>(<span class="st">&quot;./data/last.rds&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-2" title="2"><span class="st">  </span><span class="kw">filter</span>(date2<span class="op">&gt;=</span><span class="kw">make_datetime</span>(<span class="dt">year=</span><span class="dv">2022</span>, <span class="dt">month=</span><span class="dv">3</span>, <span class="dt">day =</span> <span class="dv">19</span>))</a>
<a class="sourceLine" id="cb107-3" title="3"></a>
<a class="sourceLine" id="cb107-4" title="4"></a>
<a class="sourceLine" id="cb107-5" title="5">n_t&lt;-<span class="kw">nrow</span>(df)</a>
<a class="sourceLine" id="cb107-6" title="6"></a>
<a class="sourceLine" id="cb107-7" title="7">period&lt;-<span class="st">&quot; apres le 19 mars&quot;</span></a></code></pre></div>
<p>Il y a un trick de traitement des données. La question QCM a été encodée en une colonne, ajoutant les chaines de caractère des 16 thématiques avec un séparateurs $ .</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" title="1">foo &lt;-<span class="kw">as.data.frame</span>(<span class="kw">str_split_fixed</span>(df<span class="op">$</span>themes, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">$&quot;</span>,<span class="dt">n=</span><span class="dv">3</span>)) <span class="co"># On splite la colonne thème en autant de thème possibles</span></a>
<a class="sourceLine" id="cb108-2" title="2"></a>
<a class="sourceLine" id="cb108-3" title="3">foo1&lt;-<span class="kw">cbind</span>(df,foo)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb108-4" title="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">V1=</span><span class="dv">23</span>, <span class="dt">V2=</span><span class="dv">24</span>, <span class="dt">V3=</span><span class="dv">25</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb108-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(id,V1,V2,V3)<span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb108-6" title="6"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">!</span>id,<span class="dt">names_to=</span><span class="st">&quot;rank&quot;</span>,<span class="dt">values_to=</span><span class="st">&quot;theme&quot;</span>)<span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb108-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rank=</span><span class="kw">ifelse</span>(rank<span class="op">==</span><span class="st">&quot;V1&quot;</span>, <span class="dv">3</span>,<span class="kw">ifelse</span>(rank<span class="op">==</span><span class="st">&quot;V2&quot;</span>, <span class="dv">2</span>, <span class="kw">ifelse</span>(rank<span class="op">==</span><span class="st">&quot;V3&quot;</span>,<span class="dv">1</span>, <span class="dv">0</span>)))) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#on recode les rangs par un facteur d&#39;importance de à 0 à 3</span></a>
<a class="sourceLine" id="cb108-8" title="8"><span class="st">  </span><span class="kw">filter</span>(theme<span class="op">!=</span><span class="st">&quot;&quot;</span>)<span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb108-9" title="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">theme=</span><span class="kw">str_trim</span>(theme))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb108-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">r=</span><span class="kw">as.numeric</span>(rank))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb108-11" title="11"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>rank)</a>
<a class="sourceLine" id="cb108-12" title="12"></a>
<a class="sourceLine" id="cb108-13" title="13"></a>
<a class="sourceLine" id="cb108-14" title="14">n1&lt;-<span class="kw">nrow</span>(df) <span class="co"># le nombre d&#39;individus</span></a>
<a class="sourceLine" id="cb108-15" title="15">n2&lt;-<span class="kw">nrow</span>(foo1) <span class="co">#le nombre de mentions</span></a></code></pre></div>
<p>Dans une première étape faisons le bilan global</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1"><span class="co">#on calcule la proportion et la pénétration des items</span></a>
<a class="sourceLine" id="cb109-2" title="2"></a>
<a class="sourceLine" id="cb109-3" title="3">foo2 &lt;-foo1<span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">m=</span><span class="dv">1</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb109-5" title="5"><span class="st">  </span><span class="kw">group_by</span>(theme)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb109-6" title="6"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">frequence=</span><span class="kw">sum</span>(m),</a>
<a class="sourceLine" id="cb109-7" title="7">            <span class="dt">proportion=</span>frequence<span class="op">/</span>n2,</a>
<a class="sourceLine" id="cb109-8" title="8">            <span class="dt">penetration=</span>frequence<span class="op">/</span>n1)</a>
<a class="sourceLine" id="cb109-9" title="9"></a>
<a class="sourceLine" id="cb109-10" title="10"></a>
<a class="sourceLine" id="cb109-11" title="11">col&lt;-<span class="kw">c</span>(<span class="st">&quot;#F1BB7B&quot;</span>,</a>
<a class="sourceLine" id="cb109-12" title="12">       <span class="st">&quot;#FD6467&quot;</span>,</a>
<a class="sourceLine" id="cb109-13" title="13">       <span class="st">&quot;#FD6467&quot;</span>,</a>
<a class="sourceLine" id="cb109-14" title="14">       <span class="st">&quot;#FD6467&quot;</span>,</a>
<a class="sourceLine" id="cb109-15" title="15">       <span class="st">&quot;#5B1A18&quot;</span>,</a>
<a class="sourceLine" id="cb109-16" title="16">       <span class="st">&quot;#5B1A18&quot;</span>,</a>
<a class="sourceLine" id="cb109-17" title="17">       <span class="st">&quot;#5B1A18&quot;</span>,</a>
<a class="sourceLine" id="cb109-18" title="18">       <span class="st">&quot;#F1BB7B&quot;</span>,</a>
<a class="sourceLine" id="cb109-19" title="19">       <span class="st">&quot;#FD6467&quot;</span>,</a>
<a class="sourceLine" id="cb109-20" title="20">       <span class="st">&quot;#F1BB7B&quot;</span>,</a>
<a class="sourceLine" id="cb109-21" title="21">       <span class="st">&quot;#F1BB7B&quot;</span>,</a>
<a class="sourceLine" id="cb109-22" title="22">       <span class="st">&quot;#F1BB7B&quot;</span>,</a>
<a class="sourceLine" id="cb109-23" title="23">       <span class="st">&quot;#F1BB7B&quot;</span>,</a>
<a class="sourceLine" id="cb109-24" title="24">       <span class="st">&quot;#5B1A18&quot;</span>,</a>
<a class="sourceLine" id="cb109-25" title="25">       <span class="st">&quot;#FD6467&quot;</span>,</a>
<a class="sourceLine" id="cb109-26" title="26">       <span class="st">&quot;#F1BB7B&quot;</span>,</a>
<a class="sourceLine" id="cb109-27" title="27">       <span class="st">&quot;#F1BB7B&quot;</span></a>
<a class="sourceLine" id="cb109-28" title="28">       )</a>
<a class="sourceLine" id="cb109-29" title="29"></a>
<a class="sourceLine" id="cb109-30" title="30">brks&lt;-<span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>,<span class="fl">0.4</span>,<span class="fl">0.5</span>,<span class="fl">0.6</span>)</a>
<a class="sourceLine" id="cb109-31" title="31"><span class="kw">ggplot</span>(foo2,<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(theme, frequence), <span class="dt">y=</span>penetration))<span class="op">+</span></a>
<a class="sourceLine" id="cb109-32" title="32"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="kw">aes</span>(<span class="dt">fill=</span>theme))<span class="op">+</span></a>
<a class="sourceLine" id="cb109-33" title="33"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb109-34" title="34"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span>col)<span class="op">+</span></a>
<a class="sourceLine" id="cb109-35" title="35"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Pénétration des thèmes dans la population&quot;</span>,</a>
<a class="sourceLine" id="cb109-36" title="36">       <span class="dt">x=</span><span class="ot">NULL</span>, </a>
<a class="sourceLine" id="cb109-37" title="37">       <span class="dt">y=</span> <span class="st">&quot;% de la population&quot;</span>, </a>
<a class="sourceLine" id="cb109-38" title="38">       <span class="dt">caption =</span> <span class="st">&quot;data @happydemics dataviz @benavent&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb109-39" title="39"><span class="st">  </span><span class="kw">theme_minimal</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb109-40" title="40"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-41" title="41"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> brks, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent</span>(brks))</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0812-1.png" width="672" /></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" title="1"><span class="kw">ggsave</span>(<span class="kw">paste0</span>(<span class="st">&quot;./plot/theme_&quot;</span>,period,<span class="st">&quot;.jpg&quot;</span>),<span class="dt">plot=</span><span class="kw">last_plot</span>(), <span class="dt">width =</span> <span class="dv">27</span>, <span class="dt">height =</span> <span class="dv">17</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="segmentation-simplifiée" class="section level2">
<h2><span class="header-section-number">8.2</span> segmentation simplifiée</h2>
<p>On commence va reconstruire un tableaux des individus x les thèmes. On garde les rangs comme indicateurs de l’importance .</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1">foo3&lt;-foo1<span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb111-2" title="2"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from=</span><span class="st">&quot;theme&quot;</span>, <span class="dt">values_from=</span><span class="st">&quot;r&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb111-3" title="3"><span class="st">  </span><span class="kw">replace</span>(<span class="kw">is.na</span>(.), <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb111-4" title="4"><span class="kw">head</span>(foo3, <span class="dv">8</span>)</a></code></pre></div>
<pre><code>## # A tibble: 8 x 17
##          id `L&#39;immigration` `Le pouvoir d&#39;achat` `L&#39;éducation` `L&#39;égalité Homm~`
##       &lt;dbl&gt;           &lt;dbl&gt;                &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;
## 1 235824277               3                    0             0                 0
## 2 235824417               0                    3             2                 1
## 3 235825307               0                    3             0                 0
## 4 235825503               0                    0             0                 0
## 5 235826269               0                    1             0                 0
## 6 235828154               0                    2             3                 0
## 7 235828507               0                    0             3                 2
## 8 235828613               1                    2             0                 0
## # ... with 12 more variables: `Les retraites` &lt;dbl&gt;, `L&#39;environnement` &lt;dbl&gt;,
## #   `Le service public` &lt;dbl&gt;, `L&#39;insécurité` &lt;dbl&gt;, `La santé` &lt;dbl&gt;,
## #   `Le chômage` &lt;dbl&gt;, `L&#39;économie` &lt;dbl&gt;,
## #   `La science et la technologie` &lt;dbl&gt;, `L&#39;identité nationale` &lt;dbl&gt;,
## #   `La sécurité nationale` &lt;dbl&gt;, `L&#39;union Européenne` &lt;dbl&gt;,
## #   `La culture` &lt;dbl&gt;</code></pre>
<p>On calcule un tableau de distance et on performe la classification automatique. dans cet essai on tente un modèle à 8 groupes.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" title="1">foo4&lt;-foo3[,<span class="dv">2</span><span class="op">:</span><span class="dv">17</span>]</a>
<a class="sourceLine" id="cb113-2" title="2"></a>
<a class="sourceLine" id="cb113-3" title="3"><span class="co">#distance</span></a>
<a class="sourceLine" id="cb113-4" title="4">d&lt;-<span class="kw">dist</span>(foo4)</a>
<a class="sourceLine" id="cb113-5" title="5"></a>
<a class="sourceLine" id="cb113-6" title="6"><span class="co">#clustering</span></a>
<a class="sourceLine" id="cb113-7" title="7">h.D  &lt;-<span class="st"> </span><span class="kw">hclust</span>(d, <span class="dt">method=</span><span class="st">&quot;ward.D&quot;</span>)</a>
<a class="sourceLine" id="cb113-8" title="8"></a>
<a class="sourceLine" id="cb113-9" title="9"><span class="co">#dendogramme</span></a>
<a class="sourceLine" id="cb113-10" title="10"><span class="kw">plot</span>(h.D,  <span class="dt">hang=</span><span class="op">-</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb113-11" title="11"></a>
<a class="sourceLine" id="cb113-12" title="12"><span class="co">#identification des clusters</span></a>
<a class="sourceLine" id="cb113-13" title="13"><span class="kw">rect.hclust</span>(h.D , <span class="dt">k =</span> <span class="dv">8</span>, <span class="dt">border =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">6</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0814-1.png" width="672" /></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" title="1"><span class="co">#attribution des clusters</span></a>
<a class="sourceLine" id="cb114-2" title="2">memb &lt;-<span class="st"> </span><span class="kw">cutree</span>(h.D, <span class="dt">k =</span> <span class="dv">8</span>)</a>
<a class="sourceLine" id="cb114-3" title="3"></a>
<a class="sourceLine" id="cb114-4" title="4"><span class="co">#maj du fichier de données avec l&#39;appartenace des individus aux groupes</span></a>
<a class="sourceLine" id="cb114-5" title="5">foo5&lt;-<span class="kw">cbind</span>(foo4, memb)</a></code></pre></div>
<p>Il reste à décrire les différents types sur les 16 variables qui les décrivent. On choisit une méthode de barre ordonnée avec un facetting par groupe.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1">foo6&lt;-foo5 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(memb) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb115-3" title="3"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>memb,<span class="dt">names_to=</span><span class="st">&quot;Thèmes&quot;</span>,<span class="dt">values_to=</span><span class="st">&quot;Valeurs&quot;</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb115-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(memb,Thèmes)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb115-5" title="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Valeurs=</span><span class="kw">mean</span>(Valeurs))</a>
<a class="sourceLine" id="cb115-6" title="6"></a>
<a class="sourceLine" id="cb115-7" title="7">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">1</span>]&lt;-<span class="st">&quot;multicritère&quot;</span></a>
<a class="sourceLine" id="cb115-8" title="8">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">2</span>]&lt;-<span class="st">&quot;Santé/Educ&quot;</span></a>
<a class="sourceLine" id="cb115-9" title="9">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">3</span>]&lt;-<span class="st">&quot;Pouvoir d&#39;achat/nretraites&quot;</span></a>
<a class="sourceLine" id="cb115-10" title="10">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">5</span>]&lt;-<span class="st">&quot;Immigration/nInsécurité &quot;</span></a>
<a class="sourceLine" id="cb115-11" title="11">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">4</span>]&lt;-<span class="st">&quot;égalité h/F&quot;</span></a>
<a class="sourceLine" id="cb115-12" title="12">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">6</span>]&lt;-<span class="st">&quot;Pouvoir d&#39;achat/nSanté&quot;</span></a>
<a class="sourceLine" id="cb115-13" title="13">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">7</span>]&lt;-<span class="st">&quot;Economie&quot;</span></a>
<a class="sourceLine" id="cb115-14" title="14">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">8</span>]&lt;-<span class="st">&quot;Environnement&quot;</span></a>
<a class="sourceLine" id="cb115-15" title="15"></a>
<a class="sourceLine" id="cb115-16" title="16"><span class="kw">library</span>(scales)</a>
<a class="sourceLine" id="cb115-17" title="17">brks&lt;-<span class="kw">c</span>(<span class="fl">0.5</span>,<span class="dv">1</span>,<span class="fl">1.5</span>,<span class="dv">2</span>, <span class="fl">2.5</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb115-18" title="18">p2&lt;-<span class="st"> </span><span class="kw">ggplot</span>(foo6, <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(Thèmes, Valeurs), <span class="dt">y=</span>Valeurs))<span class="op">+</span></a>
<a class="sourceLine" id="cb115-19" title="19"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="kw">aes</span>(<span class="dt">fill=</span><span class="kw">as.factor</span>(Thèmes)))<span class="op">+</span></a>
<a class="sourceLine" id="cb115-20" title="20"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(memb), <span class="dt">ncol=</span><span class="dv">4</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb115-21" title="21"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb115-22" title="22"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span>col)<span class="op">+</span></a>
<a class="sourceLine" id="cb115-23" title="23"><span class="st">  </span><span class="kw">theme_minimal</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb115-24" title="24"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks=</span>brks)<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-25" title="25"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>, <span class="dt">axis.text=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">7</span>),<span class="dt">axis.text.x=</span><span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>, <span class="dt">size=</span><span class="dv">2</span>))<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-26" title="26"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Profils des segments</span><span class="ch">\n</span><span class="st">par importance des thématiques&quot;</span>, <span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="st">&quot;importance moyenne (de 0 à 3)&quot;</span>) </a>
<a class="sourceLine" id="cb115-27" title="27"></a>
<a class="sourceLine" id="cb115-28" title="28">p2</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0815-1.png" width="672" /></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1"><span class="kw">library</span>(wesanderson)</a>
<a class="sourceLine" id="cb116-2" title="2">seg_col&lt;-<span class="kw">wes_palette</span>(<span class="st">&quot;Zissou1&quot;</span>, <span class="dv">8</span>, <span class="dt">type =</span> <span class="st">&quot;continuous&quot;</span>)</a>
<a class="sourceLine" id="cb116-3" title="3">n&lt;-<span class="kw">nrow</span>(foo5)</a>
<a class="sourceLine" id="cb116-4" title="4">foo6&lt;-foo5 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">n=</span><span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb116-5" title="5"><span class="st">  </span><span class="kw">group_by</span>(memb)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb116-6" title="6"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">freq=</span><span class="kw">sum</span>(n, <span class="dt">na.rm=</span><span class="ot">TRUE</span>))<span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>( <span class="dt">freq=</span>freq<span class="op">/</span>n)</a>
<a class="sourceLine" id="cb116-7" title="7"></a>
<a class="sourceLine" id="cb116-8" title="8"></a>
<a class="sourceLine" id="cb116-9" title="9">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">1</span>]&lt;-<span class="st">&quot;multicritère&quot;</span></a>
<a class="sourceLine" id="cb116-10" title="10">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">2</span>]&lt;-<span class="st">&quot;Santé/Educ&quot;</span></a>
<a class="sourceLine" id="cb116-11" title="11">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">3</span>]&lt;-<span class="st">&quot;Pouvoir d&#39;achat/nretraites&quot;</span></a>
<a class="sourceLine" id="cb116-12" title="12">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">5</span>]&lt;-<span class="st">&quot;Immigration/nInsécurité &quot;</span></a>
<a class="sourceLine" id="cb116-13" title="13">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">4</span>]&lt;-<span class="st">&quot;égalité h/F&quot;</span></a>
<a class="sourceLine" id="cb116-14" title="14">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">6</span>]&lt;-<span class="st">&quot;Pouvoir d&#39;achat/nSanté&quot;</span></a>
<a class="sourceLine" id="cb116-15" title="15">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">7</span>]&lt;-<span class="st">&quot;Economie&quot;</span></a>
<a class="sourceLine" id="cb116-16" title="16">foo6<span class="op">$</span>group[foo6<span class="op">$</span>memb<span class="op">==</span><span class="dv">8</span>]&lt;-<span class="st">&quot;Environnement&quot;</span></a>
<a class="sourceLine" id="cb116-17" title="17"></a>
<a class="sourceLine" id="cb116-18" title="18"></a>
<a class="sourceLine" id="cb116-19" title="19">p1&lt;-<span class="st"> </span><span class="kw">ggplot</span>(foo6, <span class="kw">aes</span>(<span class="dt">x=</span>group, <span class="dt">y=</span>freq))<span class="op">+</span></a>
<a class="sourceLine" id="cb116-20" title="20"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="kw">aes</span>(<span class="dt">fill=</span>group))<span class="op">+</span></a>
<a class="sourceLine" id="cb116-21" title="21"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span>seg_col) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-22" title="22"><span class="st">  </span><span class="kw">theme_minimal</span>()<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-23" title="23"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Poids des segments&quot;</span>, <span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="st">&quot;Proportion&quot;</span>)<span class="op">+</span><span class="st">  </span></a>
<a class="sourceLine" id="cb116-24" title="24"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks=</span>brks,<span class="dt">labels=</span>percent)<span class="op">+</span><span class="st">  </span></a>
<a class="sourceLine" id="cb116-25" title="25"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</a>
<a class="sourceLine" id="cb116-26" title="26"></a>
<a class="sourceLine" id="cb116-27" title="27"><span class="kw">plot_grid</span>(p1, p2, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>), <span class="dt">label_size =</span> <span class="dv">12</span>, <span class="dt">ncol=</span><span class="dv">1</span>,<span class="dt">rel_heights =</span>  <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0815-2.png" width="672" /></p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" title="1"><span class="kw">ggsave</span>(<span class="st">&quot;./plot/g_segment.jpg&quot;</span>,<span class="dt">plot=</span><span class="kw">last_plot</span>(), <span class="dt">width =</span> <span class="dv">27</span>, <span class="dt">height =</span> <span class="dv">17</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a></code></pre></div>
</div>
<div id="tableaux-croisés-de-la-typologie-et-des-critères-sociaux-démos" class="section level2">
<h2><span class="header-section-number">8.3</span> tableaux croisés de la typologie et des critères sociaux démos</h2>
<p>On revient à une approche descriptive, on croisant successivement notre variable typologie avec les critères socio-demo qui ont été mesurés dans l’enquête.</p>
<p>( une boucle simplifierait ! )</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1">df&lt;-<span class="kw">cbind</span>(df,foo5)</a>
<a class="sourceLine" id="cb118-2" title="2"></a>
<a class="sourceLine" id="cb118-3" title="3">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">1</span>]&lt;-<span class="st">&quot;multicritère&quot;</span></a>
<a class="sourceLine" id="cb118-4" title="4">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">2</span>]&lt;-<span class="st">&quot;Santé/Educ&quot;</span></a>
<a class="sourceLine" id="cb118-5" title="5">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">3</span>]&lt;-<span class="st">&quot;Pouvoir d&#39;achat/nretraites&quot;</span></a>
<a class="sourceLine" id="cb118-6" title="6">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">5</span>]&lt;-<span class="st">&quot;Immigration/nInsécurité &quot;</span></a>
<a class="sourceLine" id="cb118-7" title="7">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">4</span>]&lt;-<span class="st">&quot;égalité h/F&quot;</span></a>
<a class="sourceLine" id="cb118-8" title="8">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">6</span>]&lt;-<span class="st">&quot;Pouvoir d&#39;achat/nSanté&quot;</span></a>
<a class="sourceLine" id="cb118-9" title="9">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">7</span>]&lt;-<span class="st">&quot;Economie&quot;</span></a>
<a class="sourceLine" id="cb118-10" title="10">df<span class="op">$</span>group[df<span class="op">$</span>memb<span class="op">==</span><span class="dv">8</span>]&lt;-<span class="st">&quot;Environnement&quot;</span></a>
<a class="sourceLine" id="cb118-11" title="11"></a>
<a class="sourceLine" id="cb118-12" title="12"></a>
<a class="sourceLine" id="cb118-13" title="13">foo&lt;-df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-14" title="14"><span class="st">  </span><span class="kw">group_by</span>(group, Sensibilité) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-15" title="15"><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">n=</span><span class="kw">n</span>())<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb118-16" title="16"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop=</span><span class="kw">round</span>(n<span class="op">/</span><span class="kw">sum</span>(n),<span class="dv">3</span>), <span class="dt">cum=</span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">cumsum</span>(prop)<span class="op">-</span>prop<span class="op">/</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb118-17" title="17"></a>
<a class="sourceLine" id="cb118-18" title="18">g01&lt;-<span class="kw">ggplot</span>(foo,<span class="kw">aes</span>(<span class="dt">x=</span>group, <span class="dt">y=</span>prop, <span class="dt">group=</span>Sensibilité))<span class="op">+</span></a>
<a class="sourceLine" id="cb118-19" title="19"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="kw">aes</span>(<span class="dt">y =</span> prop, <span class="dt">fill=</span>Sensibilité)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-20" title="20"><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> brks, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent</span>(brks)) <span class="op">+</span></a>
<a class="sourceLine" id="cb118-21" title="21"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span>SensiP2) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-22" title="22"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> prop, <span class="dt">y=</span>cum),<span class="dt">size=</span><span class="dv">2</span>,<span class="dt">color=</span><span class="st">&quot;white&quot;</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb118-23" title="23"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb118-24" title="24"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Types d&#39;attentes par sensibilité politique &quot;</span>, </a>
<a class="sourceLine" id="cb118-25" title="25">       <span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="ot">NULL</span>,)<span class="op">+</span></a>
<a class="sourceLine" id="cb118-26" title="26"><span class="st">  </span><span class="kw">theme_bw</span>()<span class="op">+</span><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>), <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>)) </a>
<a class="sourceLine" id="cb118-27" title="27"></a>
<a class="sourceLine" id="cb118-28" title="28"></a>
<a class="sourceLine" id="cb118-29" title="29"></a>
<a class="sourceLine" id="cb118-30" title="30"><span class="kw">ggsave</span>(<span class="st">&quot;./plot/g_segment01.jpg&quot;</span>,<span class="dt">plot=</span><span class="kw">last_plot</span>(), <span class="dt">width =</span> <span class="dv">27</span>, <span class="dt">height =</span> <span class="dv">17</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a>
<a class="sourceLine" id="cb118-31" title="31"></a>
<a class="sourceLine" id="cb118-32" title="32"></a>
<a class="sourceLine" id="cb118-33" title="33">foo&lt;-df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-34" title="34"><span class="st">  </span><span class="kw">group_by</span>(group, Age) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-35" title="35"><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">n=</span><span class="kw">n</span>())<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb118-36" title="36"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop=</span><span class="kw">round</span>(n<span class="op">/</span><span class="kw">sum</span>(n),<span class="dv">3</span>), <span class="dt">cum=</span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">cumsum</span>(prop)<span class="op">-</span>prop<span class="op">/</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb118-37" title="37"></a>
<a class="sourceLine" id="cb118-38" title="38">g02&lt;-<span class="kw">ggplot</span>(foo,<span class="kw">aes</span>(<span class="dt">x=</span>group, <span class="dt">y=</span>prop, <span class="dt">group=</span>Age))<span class="op">+</span></a>
<a class="sourceLine" id="cb118-39" title="39"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="kw">aes</span>(<span class="dt">y =</span> prop, <span class="dt">fill=</span>Age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-40" title="40"><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> brks, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent</span>(brks)) <span class="op">+</span></a>
<a class="sourceLine" id="cb118-41" title="41"><span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Spectral&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> prop, <span class="dt">y=</span>cum),<span class="dt">size=</span><span class="dv">2</span>,<span class="dt">color=</span><span class="st">&quot;white&quot;</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb118-42" title="42"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb118-43" title="43"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Types d&#39;attentes par classe d&#39;âge &quot;</span>, </a>
<a class="sourceLine" id="cb118-44" title="44">       <span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="ot">NULL</span>,)<span class="op">+</span><span class="kw">theme_bw</span>()  <span class="op">+</span></a>
<a class="sourceLine" id="cb118-45" title="45"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>), <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>)) </a>
<a class="sourceLine" id="cb118-46" title="46"></a>
<a class="sourceLine" id="cb118-47" title="47"></a>
<a class="sourceLine" id="cb118-48" title="48"></a>
<a class="sourceLine" id="cb118-49" title="49"><span class="kw">ggsave</span>(<span class="st">&quot;./plot/g_segment02.jpg&quot;</span>,<span class="dt">plot=</span><span class="kw">last_plot</span>(), <span class="dt">width =</span> <span class="dv">27</span>, <span class="dt">height =</span> <span class="dv">17</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a>
<a class="sourceLine" id="cb118-50" title="50"></a>
<a class="sourceLine" id="cb118-51" title="51"></a>
<a class="sourceLine" id="cb118-52" title="52">foo&lt;-df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-53" title="53"><span class="st">  </span><span class="kw">group_by</span>(group, Sexe) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-54" title="54"><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">n=</span><span class="kw">n</span>())<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb118-55" title="55"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop=</span><span class="kw">round</span>(n<span class="op">/</span><span class="kw">sum</span>(n),<span class="dv">3</span>), <span class="dt">cum=</span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">cumsum</span>(prop)<span class="op">-</span>prop<span class="op">/</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb118-56" title="56"></a>
<a class="sourceLine" id="cb118-57" title="57">g03&lt;-<span class="kw">ggplot</span>(foo,<span class="kw">aes</span>(<span class="dt">x=</span>group, <span class="dt">y=</span>prop, <span class="dt">group=</span>Sexe))<span class="op">+</span></a>
<a class="sourceLine" id="cb118-58" title="58"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="kw">aes</span>(<span class="dt">y =</span> prop, <span class="dt">fill=</span>Sexe)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-59" title="59"><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> brks, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent</span>(brks)) <span class="op">+</span></a>
<a class="sourceLine" id="cb118-60" title="60"><span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Spectral&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> prop, <span class="dt">y=</span>cum),<span class="dt">size=</span><span class="dv">2</span>,<span class="dt">color=</span><span class="st">&quot;white&quot;</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb118-61" title="61"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span><span class="st">  </span><span class="kw">theme_bw</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb118-62" title="62"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Types d&#39;attentes par genre &quot;</span>, </a>
<a class="sourceLine" id="cb118-63" title="63">       <span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="ot">NULL</span>,)<span class="op">+</span></a>
<a class="sourceLine" id="cb118-64" title="64"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>), <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>))</a>
<a class="sourceLine" id="cb118-65" title="65"></a>
<a class="sourceLine" id="cb118-66" title="66"><span class="kw">ggsave</span>(<span class="st">&quot;./plot/g_segment03.jpg&quot;</span>,<span class="dt">plot=</span><span class="kw">last_plot</span>(), <span class="dt">width =</span> <span class="dv">27</span>, <span class="dt">height =</span> <span class="dv">17</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a>
<a class="sourceLine" id="cb118-67" title="67"></a>
<a class="sourceLine" id="cb118-68" title="68">foo&lt;-df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-69" title="69"><span class="st">  </span><span class="kw">group_by</span>(group, Education) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-70" title="70"><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">n=</span><span class="kw">n</span>())<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb118-71" title="71"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop=</span><span class="kw">round</span>(n<span class="op">/</span><span class="kw">sum</span>(n),<span class="dv">3</span>), <span class="dt">cum=</span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">cumsum</span>(prop)<span class="op">-</span>prop<span class="op">/</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb118-72" title="72"></a>
<a class="sourceLine" id="cb118-73" title="73">g04&lt;-<span class="kw">ggplot</span>(foo,<span class="kw">aes</span>(<span class="dt">x=</span>group, <span class="dt">y=</span>prop, <span class="dt">group=</span>Education))<span class="op">+</span></a>
<a class="sourceLine" id="cb118-74" title="74"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="kw">aes</span>(<span class="dt">y =</span> prop, <span class="dt">fill=</span>Education)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-75" title="75"><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> brks, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent</span>(brks)) <span class="op">+</span></a>
<a class="sourceLine" id="cb118-76" title="76"><span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Spectral&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-77" title="77"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> prop, <span class="dt">y=</span>cum),<span class="dt">size=</span><span class="fl">1.5</span>,<span class="dt">color=</span><span class="st">&quot;white&quot;</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb118-78" title="78"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span><span class="kw">theme_bw</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb118-79" title="79"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Types d&#39;attentes par niveau d&#39;éducation &quot;</span>, </a>
<a class="sourceLine" id="cb118-80" title="80">       <span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="ot">NULL</span>,)<span class="op">+</span></a>
<a class="sourceLine" id="cb118-81" title="81"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>), <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>)) </a>
<a class="sourceLine" id="cb118-82" title="82">  </a>
<a class="sourceLine" id="cb118-83" title="83"></a>
<a class="sourceLine" id="cb118-84" title="84"></a>
<a class="sourceLine" id="cb118-85" title="85"><span class="kw">ggsave</span>(<span class="st">&quot;./plot/g_segment04.jpg&quot;</span>,<span class="dt">plot=</span><span class="kw">last_plot</span>(), <span class="dt">width =</span> <span class="dv">27</span>, <span class="dt">height =</span> <span class="dv">17</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a>
<a class="sourceLine" id="cb118-86" title="86"></a>
<a class="sourceLine" id="cb118-87" title="87"></a>
<a class="sourceLine" id="cb118-88" title="88"><span class="kw">plot_grid</span>(g01, g02, g04,g03,  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>, <span class="st">&#39;D&#39;</span>), <span class="dt">label_size =</span> <span class="dv">11</span>, <span class="dt">ncol=</span><span class="dv">2</span>,<span class="dt">rel_widths =</span>  <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>))</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0817-1.png" width="672" /></p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" title="1"><span class="kw">ggsave</span>(<span class="st">&quot;./plot/g_segment05.jpg&quot;</span>,<span class="dt">plot=</span><span class="kw">last_plot</span>(), <span class="dt">width =</span> <span class="dv">27</span>, <span class="dt">height =</span> <span class="dv">17</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a></code></pre></div>
</div>
<div id="afcm-pour-une-synthèse" class="section level2">
<h2><span class="header-section-number">8.4</span> AFCM pour une synthèse</h2>
<p>C’est le bon moment de donner une seconde illustration de l’utilité de l’AFCM. Pourquoi ne pas synthétiser en une carte l’ensemble des relations statistiques.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1"><span class="kw">library</span>(FactoMineR)</a>
<a class="sourceLine" id="cb120-2" title="2"><span class="kw">library</span>(factoextra)</a>
<a class="sourceLine" id="cb120-3" title="3">X&lt;-df <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>( group, Age, Sexe, Sensibilité, Situation2)</a>
<a class="sourceLine" id="cb120-4" title="4">res&lt;-<span class="kw">MCA</span>(X, <span class="dt">graph =</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb120-5" title="5"></a>
<a class="sourceLine" id="cb120-6" title="6">foo&lt;-<span class="kw">as.data.frame</span>(res<span class="op">$</span>var<span class="op">$</span>coord) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb120-7" title="7"><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var=</span><span class="st">&quot;var&quot;</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb120-8" title="8"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">dim1=</span><span class="dv">2</span>, <span class="dt">dim2=</span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb120-9" title="9"><span class="st">  </span><span class="kw">add_rownames</span>(<span class="dt">var =</span> <span class="st">&quot;rowname&quot;</span>)</a>
<a class="sourceLine" id="cb120-10" title="10"></a>
<a class="sourceLine" id="cb120-11" title="11">foo<span class="op">$</span>rowname&lt;-<span class="kw">as.numeric</span>(foo<span class="op">$</span>rowname) </a>
<a class="sourceLine" id="cb120-12" title="12">foo&lt;-foo <span class="op">%&gt;%</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">label=</span><span class="kw">ifelse</span>(rowname<span class="op">&lt;</span><span class="dv">9</span>, <span class="st">&quot;groupe&quot;</span>, <span class="st">&quot;&quot;</span>))</a>
<a class="sourceLine" id="cb120-13" title="13"></a>
<a class="sourceLine" id="cb120-14" title="14"></a>
<a class="sourceLine" id="cb120-15" title="15"></a>
<a class="sourceLine" id="cb120-16" title="16"><span class="kw">ggplot</span>(foo, <span class="kw">aes</span>(<span class="dt">x=</span>dim1, <span class="dt">y=</span>dim2, <span class="dt">label=</span> var) )<span class="op">+</span></a>
<a class="sourceLine" id="cb120-17" title="17"><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb120-18" title="18"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>var, <span class="dt">color=</span>label),<span class="dt">size=</span><span class="dv">3</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb120-19" title="19"><span class="st">  </span><span class="kw">theme_bw</span>()<span class="op">+</span><span class="kw">labs</span>( <span class="dt">title=</span> <span class="st">&quot;AFCM&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/0820-1.png" width="672" /></p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1">  <span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</a></code></pre></div>
<pre><code>## List of 1
##  $ legend.position: chr &quot;none&quot;
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;theme&quot; &quot;gg&quot;
##  - attr(*, &quot;complete&quot;)= logi FALSE
##  - attr(*, &quot;validate&quot;)= logi TRUE</code></pre>
<div id="forces-et-limites" class="section level3">
<h3><span class="header-section-number">8.4.1</span> Forces et limites</h3>
<ul>
<li>forces : graphiques, complète</li>
<li>limites : petite population</li>
</ul>
</div>
</div>
<div id="les-méthodes-non-hiérarchiques" class="section level2">
<h2><span class="header-section-number">8.5</span> Les méthodes non-hiérarchiques</h2>
<p>La première d’entre elles est la méthode k-means dont le principe est très simple : plutôt que de calculer toutes les distances entre tous les objets, on va se concentrer sur les distances en k group supposés et les n individus. L’hyperparamètre est ici le nombre de groupes</p>
<div id="principe" class="section level3">
<h3><span class="header-section-number">8.5.1</span> principe</h3>
</div>
<div id="application-1" class="section level3">
<h3><span class="header-section-number">8.5.2</span> Application</h3>
</div>
<div id="le-problème-de-la-détermination-du-nombre-optimal-de-groupe" class="section level3">
<h3><span class="header-section-number">8.5.3</span> Le problème de la détermination du nombre optimal de groupe</h3>
<ul>
<li>méthode du coude</li>
<li>méthode silhouette</li>
<li>gap statistics</li>
</ul>
</div>
</div>
<div id="autres-méthodes" class="section level2">
<h2><span class="header-section-number">8.6</span> Autres méthodes</h2>
<p>de nombreuses variantes sont disponibles</p>
<ul>
<li>mediane</li>
<li>kernel</li>
<li>les méthodes fuzzy : l’appartenance n’est pas exclusive mais probabilistique</li>
<li>les méthode de classes latentes</li>
<li>les méthodes de densités s’appuie sur l’idée que la continuité d’un groupe s’exprime en terme s de densités
** paramètriques
** non - paramètriques <a href="http://www.sthda.com/english/wiki/wiki.php?id_contents=7940" class="uri">http://www.sthda.com/english/wiki/wiki.php?id_contents=7940</a></li>
</ul>
<p>: <a href="https://link.springer.com/referenceworkentry/10.1007%2F978-0-387-30164-8_211" class="uri">https://link.springer.com/referenceworkentry/10.1007%2F978-0-387-30164-8_211</a></p>
</div>
<div id="conclusion" class="section level2">
<h2><span class="header-section-number">8.7</span> Conclusion</h2>

<div id="refs" class="references">
<div>
<p>Allaire, J. J., Yihui Xie, Jonathan McPherson, Javier Luraschi, Kevin Ushey, Aron Atkins, Hadley Wickham, Joe Cheng, Winston Chang, and Richard Iannone. 2021. <em>Rmarkdown: Dynamic Documents for R</em>. <a href="https://CRAN.R-project.org/package=rmarkdown">https://CRAN.R-project.org/package=rmarkdown</a>.</p>
</div>
<div>
<p>Sneath, P. H. A., and Robert R. Sokal. 1973. <em>Numerical Taxonomy: The Principles and Practice of Numerical Classification</em>. A Series of Books in Biology. San Francisco: W. H. Freeman.</p>
</div>
<div>
<p>Xie, Yihui. 2021. <em>Bookdown: Authoring Books and Technical Documents with R Markdown</em>.</p>
</div>
</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-sneath_numerical_1973">
<p>Sneath, P. H. A., and Robert R. Sokal. 1973. <em>Numerical Taxonomy: The Principles and Practice of Numerical Classification</em>. A Series of Books in Biology. San Francisco: W. H. Freeman.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analyses-factorielles.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-clustering.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
